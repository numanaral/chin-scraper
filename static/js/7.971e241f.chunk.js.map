{"version":3,"sources":["../node_modules/hanzi-writer/dist/hanzi-writer.js"],"names":["factory","self","modules","installedModules","__webpack_require__","moduleId","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","global","_typeof","Symbol","iterator","obj","constructor","performanceNow","performance","now","Date","requestAnimationFrame","callback","setTimeout","cancelAnimationFrame","clearTimeout","_assign","target","overrideTarget","_len","arguments","length","overrides","Array","_key","forEach","override","key","assign","count","ua","navigator","userAgent","isMsBrowser","indexOf","arrLast","arr","average","reduce","acc","val","callIfExists","arg","colorStringToVals","colorString","normalizedColor","toUpperCase","trim","test","hexParts","substring","split","hexStr","join","r","parseInt","slice","g","b","a","rgbMatch","match","parseFloat","Error","copyAndMergeDeep","base","output","baseVal","overrideVal","isArray","counter","emptyFunc","inflate","scope","parts","final","current","cap","objRepeat","item","times","timeout","duration","undefined","Promise","resolve","reject","string","replace","this","Function","eval","e","window","_require","subtract","p1","p2","x","y","magnitude","point","Math","sqrt","pow","distance","point1","point2","round","precision","multiplier","points","lastPoint","dist","_extendPointOnLine","vect","norm","subdivideCurve","curve","maxLen","newCurve","prevPoint","segLen","numNewPoints","ceil","newSegLen","push","outlineCurve","numPoints","curveLen","segmentLen","outlinePoints","endPoint","remainingCurvePoints","remainingDist","outlinePointFound","nextPointDist","shift","nextPoint","_filterParallelPoints","filteredPoints","numFilteredPoints","curVect","prevVect","pop","equals","getPathString","close","start","remainingPoints","pathString","roundedPoint","frechetDist","curve1","curve2","results","j","recursiveCalc","max","min","Infinity","rotate","theta","map","cos","sin","extendStart","newStart","extendedPoints","unshift","cosineSimilarity","normalizeCurve","outlinedCurve","mean","translatedCurve","scale","scaledCurve","attr","elm","value","setAttributeNS","createElm","elmType","document","createElementNS","attrs","attrsMap","keys","attrName","removeElm","parentNode","removeChild","urlIdRef","id","prefix","location","href","_defineProperty","writable","Mutation","showStrokes","charName","character","opacity","displayPortion","strokes","force","hideCharacter","concat","animateStroke","stroke","speed","strokeNum","getLength","animateCharacter","fadeDuration","delayBetweenStrokes","mutations","Delay","showCharacter","highlightStroke","color","animateCharacterLoop","delayBetweenLoops","animateSingleStroke","state","curCharState","mutationState","showStroke","updateColor","colorName","colorVal","getPartialValues","startValues","endValues","progress","endValue","startValue","isAlreadyAtEnd","valuesOrCallable","options","_valuesOrCallable","_duration","_force","_pausedDuration","_tickBound","_tick","bind","_startPauseTime","_startTime","_paused","run","renderState","_this","_values","_inflateValues","updateState","_renderState","_startState","_frameHandle","_resolve","pause","resume","timing","cancel","easedProgress","PI","values","elapsedDelay","_timeout","_this2","_this3","timeoutPromise","StrokeRendererBase","_getStrokeDashoffset","_pathLength","_getColor","_ref","strokeColor","radicalColor","_stroke","isInRadical","RenderTargetBase","addPointerStartListener","node","addEventListener","evt","_eventify","_getMousePoint","_getTouchPoint","addPointerMoveListener","addPointerEndListener","getBoundingClientRect","pointFunc","getPoint","preventDefault","box","clientX","left","clientY","top","touches","drawPath","ctx","beginPath","moveTo","lineTo","pathStringToCanvas","pathParts","filter","part","commands","_part$split","_part$split2","from","cmd","params","param","apply","bezierCurveTo","quadraticCurveTo","RenderState","parseCharData","Positioner","Quiz","svgRenderer","canvasRenderer","defaultCharDataLoader","LoadingManager","characterActions","defaultOptions","charDataLoader","onLoadCharDataError","onLoadCharDataSuccess","showOutline","renderer","width","height","padding","strokeAnimationSpeed","strokeFadeDuration","strokeHighlightDuration","strokeHighlightSpeed","highlightColor","outlineColor","drawingColor","leniency","showHintAfterMisses","highlightOnComplete","highlightCompleteColor","drawingFadeDuration","drawingWidth","strokeWidth","outlineWidth","rendererOverride","HanziWriter","element","console","warn","_init","setCharacter","_options","_withData","_character","then","res","onComplete","cancelQuiz","_this4","_this5","loopCharacterAnimation","_this6","loop","pauseAnimation","_this7","pauseAll","resumeAnimation","_this8","resumeAll","_this9","hideOutline","_this10","_this11","fixedColorVal","mappedColor","mutation","quiz","_this12","quizOptions","_quiz","_positioner","startQuiz","char","_this13","_char","_hanziWriterRenderer","destroy","cancelAll","_withDataPromise","_loadingManager","loadCharData","pathStrings","loadingFailed","hanziWriterRenderer","_renderer","HanziWriterRenderer","nextState","render","mount","createRenderTarget","_assignOptions","_setupListeners","mergedOptions","strokeAnimationDuration","_fillWidthAndHeight","filledOpts","_target$getBoundingCl","minDim","func","_this14","_this15","_forwardToQuiz","method","args","create","writer","lastLoadingManager","lastLoadingOptions","loadCharacterData","loadingManager","getScalingTransform","positioner","xOffset","yOffset","transform","onStateChange","_onStateChange","_mutationChains","main","outline","highlight","userStrokes","stateChanges","scopes","mut","cancelMutations","mutationChain","_isActive","_index","_mutations","_loop","_scopes","_run","chain","canceled","_getActiveMutations","chainScope","_cancelMutationChain","_slicedToArray","_arr","_n","_d","_e","_s","_i","next","done","err","sliceIterator","TypeError","Stroke","Character","generateStrokes","charJson","path","index","medians","pointData","_pointData","radStrokes","symbol","getStartingPoint","getEndingPoint","getVectors","vector","getDistance","distances","strokePoint","getAverageDistance","CHARACTER_BOUNDS","_calculateScaleAndOffset","convertExternalPoint","bounds","preScaledWidth","preScaledHeight","effectiveWidth","effectiveHeight","scaleX","scaleY","xCenteringBuffer","yCenteringBuffer","strokeMatches","UserStroke","quizActions","geometry","getDrawnPath","userStroke","externalPoints","_currentStrokeIndex","_numRecentMistakes","_totalMistakes","startUserStroke","externalPoint","_userStroke","endUserStroke","strokeId","continueUserStroke","appendPoint","nextPoints","updateUserStroke","removeUserStroke","currentStroke","_getCurrentStroke","isOutlineVisible","_handleSuccess","_handleFailure","onCorrectStroke","mistakesOnStroke","totalMistakes","strokesRemaining","drawnPath","animation","highlightCompleteChar","onMistake","_require2","directionMatches","edgeVectors","vectors","getEdgeVectors","strokeVectors","similarities","edgeVector","strokeSimilarities","strokeVector","stripDuplicates","dedupedPoints","SHAPE_FIT_ROTATIONS","getMatchData","_options$leniency","_options$isOutlineVis","avgDist","withinDistThresh","isMatch","startAndEndMatch","closestStroke","startingDist","endingDist","startAndEndMatches","directionMatch","shapeMatch","normCurve1","normCurve2","minDist","shapeFit","lengthMatch","lengthMatches","strokeMatchData","laterStrokes","closestMatchDist","laterMatchData","leniencyAdjustment","newLeniency","adjustedOptions","adjustedStrokeMatchData","startingPoint","startingExternalPoint","userStrokeId","RenderTarget","init","CharacterRenderer","UserStrokeRenderer","svg","_mainCharRenderer","_outlineCharRenderer","_highlightCharRenderer","_userStrokeRenderers","positionedTarget","createSubRenderTarget","group","_positionedTarget","props","userStrokeProps","strokeRenderer","defs","innerHTML","StrokeRenderer","_oldProps","_strokeRenderers","subTarget","_group","style","display","removeProperty","colorsChanged","STROKE_WIDTH","_animationPath","_clip","_strokePath","maskId","extendedMaskPoints","fill","appendChild","strokeDashoffset","_path","_props$strokeColor","createSVGPoint","_pt","localPt","matrixTransform","getScreenCTM","inverse","elmOrId","getElementById","nodeType","nodeName","renderUserStroke","_target","_animationFrame","getContext","clearRect","save","translate","restore","draw","usePath2D","Path2D","_path2D","_pathCmd","_extendedMaskPoints","clip","globalAlpha","dashOffset","strokeStyle","fillStyle","lineWidth","lineCap","lineJoin","setLineDash","lineDashOffset","canvas","createElement","setAttribute","onLoad","onError","xhr","XMLHttpRequest","overrideMimeType","open","getCharDataUrl","onerror","event","onreadystatechange","readyState","status","JSON","parse","responseText","send","_loadCounter","_isLoading","_debouncedLoad","wrappedResolve","data","returnedData","reason","_reject","_setupLoadingPromise","_loadingChar","promise"],"mappings":"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","file":"static/js/7.971e241f.chunk.js","sourcesContent":["/*!\n * Hanzi Writer v2.3.0\n * https://chanind.github.io/hanzi-writer\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"HanziWriter\"] = factory();\n\telse\n\t\troot[\"HanziWriter\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 9);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction emptyFunc() {}\n\nvar performanceNow = global.performance && function () {\n  return global.performance.now();\n} || function () {\n  return Date.now();\n};\nvar requestAnimationFrame = global.requestAnimationFrame || function (callback) {\n  return setTimeout(function () {\n    return callback(performanceNow());\n  }, 1000 / 60);\n};\nvar cancelAnimationFrame = global.cancelAnimationFrame || clearTimeout;\n\n// Object.assign polyfill, because IE :/\nvar _assign = function _assign(target) {\n  var overrideTarget = Object(target);\n\n  for (var _len = arguments.length, overrides = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    overrides[_key - 1] = arguments[_key];\n  }\n\n  overrides.forEach(function (override) {\n    if (override != null) {\n      for (var key in override) {\n        if (Object.prototype.hasOwnProperty.call(override, key)) {\n          overrideTarget[key] = override[key];\n        }\n      }\n    }\n  });\n  return overrideTarget;\n};\n\nvar assign = Object.assign || _assign;\n\nvar arrLast = function arrLast(arr) {\n  return arr[arr.length - 1];\n};\n\nfunction copyAndMergeDeep(base, override) {\n  var output = assign({}, base);\n  for (var key in override) {\n    // eslint-disable-line guard-for-in\n    // skipping hasOwnProperty check for performance reasons - we shouldn't be passing any objects\n    // in here that aren't plain objects anyway and this is a hot code path\n    var baseVal = base[key];\n    var overrideVal = override[key];\n    if (baseVal === overrideVal) continue; // eslint-disable-line no-continue\n    if (baseVal && overrideVal && (typeof baseVal === 'undefined' ? 'undefined' : _typeof(baseVal)) === 'object' && (typeof overrideVal === 'undefined' ? 'undefined' : _typeof(overrideVal)) === 'object' && !Array.isArray(overrideVal)) {\n      output[key] = copyAndMergeDeep(baseVal, overrideVal);\n    } else {\n      output[key] = overrideVal;\n    }\n  }\n  return output;\n}\n\nfunction inflate(scope, obj) {\n  var parts = scope.split('.');\n  var final = {};\n  var current = final;\n  for (var i = 0; i < parts.length; i++) {\n    var cap = i === parts.length - 1 ? obj : {};\n    current[parts[i]] = cap;\n    current = cap;\n  }\n  return final;\n}\n\nfunction callIfExists(callback, arg) {\n  if (callback) callback(arg);\n  return arg;\n}\n\nvar count = 0;\nfunction counter() {\n  count++;\n  return count;\n}\n\nfunction average(arr) {\n  var sum = arr.reduce(function (acc, val) {\n    return val + acc;\n  }, 0);\n  return sum / arr.length;\n}\n\nfunction timeout() {\n  var duration = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n  return new Promise(function (resolve, reject) {\n    setTimeout(resolve, duration);\n  });\n}\n\nfunction colorStringToVals(colorString) {\n  var normalizedColor = colorString.toUpperCase().trim();\n  // based on https://stackoverflow.com/a/21648508\n  if (/^#([A-F0-9]{3}){1,2}$/.test(normalizedColor)) {\n    var hexParts = normalizedColor.substring(1).split('');\n    if (hexParts.length === 3) {\n      hexParts = [hexParts[0], hexParts[0], hexParts[1], hexParts[1], hexParts[2], hexParts[2]];\n    }\n    var hexStr = '' + hexParts.join('');\n    return {\n      r: parseInt(hexStr.slice(0, 2), 16),\n      g: parseInt(hexStr.slice(2, 4), 16),\n      b: parseInt(hexStr.slice(4, 6), 16),\n      a: 1\n    };\n  }\n  var rgbMatch = normalizedColor.match(/^RGBA?\\((\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)(?:\\s*,\\s*(\\d*\\.?\\d+))?\\)$/);\n  if (rgbMatch) {\n    return {\n      r: parseInt(rgbMatch[1], 10),\n      g: parseInt(rgbMatch[2], 10),\n      b: parseInt(rgbMatch[3], 10),\n      a: parseFloat(rgbMatch[4] || 1, 10)\n    };\n  }\n  throw new Error('Invalid color: ' + colorString);\n}\n\nvar trim = function trim(string) {\n  return string.replace(/^\\s+/, '').replace(/\\s+$/, '');\n};\n\n// return a new array-like object with int keys where each key is item\n// ex: objRepeat({x: 8}, 3) === {0: {x: 8}, 1: {x: 8}, 2: {x: 8}}\nvar objRepeat = function objRepeat(item, times) {\n  var obj = {};\n  for (var i = 0; i < times; i++) {\n    obj[i] = item;\n  }\n  return obj;\n};\n\nvar ua = global.navigator && global.navigator.userAgent || '';\nvar isMsBrowser = ua.indexOf('MSIE ') > 0 || ua.indexOf('Trident/') > 0 || ua.indexOf('Edge/') > 0;\n\nmodule.exports = {\n  _assign: _assign,\n  arrLast: arrLast,\n  assign: assign,\n  average: average,\n  callIfExists: callIfExists,\n  cancelAnimationFrame: cancelAnimationFrame,\n  colorStringToVals: colorStringToVals,\n  copyAndMergeDeep: copyAndMergeDeep,\n  counter: counter,\n  emptyFunc: emptyFunc,\n  inflate: inflate,\n  objRepeat: objRepeat,\n  performanceNow: performanceNow,\n  requestAnimationFrame: requestAnimationFrame,\n  timeout: timeout,\n  trim: trim,\n  isMsBrowser: isMsBrowser\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _require = __webpack_require__(0),\n    average = _require.average,\n    arrLast = _require.arrLast;\n\nvar subtract = function subtract(p1, p2) {\n  return { x: p1.x - p2.x, y: p1.y - p2.y };\n};\nvar magnitude = function magnitude(point) {\n  return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\n};\nvar distance = function distance(point1, point2) {\n  return magnitude(subtract(point1, point2));\n};\nvar equals = function equals(point1, point2) {\n  return point1.x === point2.x && point1.y === point2.y;\n};\nvar round = function round(point) {\n  var precision = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n  var multiplier = precision * 10;\n  return {\n    x: Math.round(multiplier * point.x) / multiplier,\n    y: Math.round(multiplier * point.y) / multiplier\n  };\n};\n\nvar length = function length(points) {\n  var lastPoint = points[0];\n  var pointsSansFirst = points.slice(1);\n  return pointsSansFirst.reduce(function (acc, point) {\n    var dist = distance(point, lastPoint);\n    lastPoint = point;\n    return acc + dist;\n  }, 0);\n};\n\nvar cosineSimilarity = function cosineSimilarity(point1, point2) {\n  var rawDotProduct = point1.x * point2.x + point1.y * point2.y;\n  return rawDotProduct / magnitude(point1) / magnitude(point2);\n};\n\n// return a new point, p3, which is on the same line as p1 and p2, but distance away\n// from p2. p1, p2, p3 will always lie on the line in that order\nvar _extendPointOnLine = function _extendPointOnLine(p1, p2, dist) {\n  var vect = subtract(p2, p1);\n  var norm = dist / magnitude(vect);\n  return { x: p2.x + norm * vect.x, y: p2.y + norm * vect.y };\n};\n\n// based on http://www.kr.tuwien.ac.at/staff/eiter/et-archive/cdtr9464.pdf\nvar frechetDist = function frechetDist(curve1, curve2) {\n  var results = [];\n  for (var i = 0; i < curve1.length; i++) {\n    results.push([]);\n    for (var j = 0; j < curve2.length; j++) {\n      results[i].push(-1);\n    }\n  }\n\n  var recursiveCalc = function recursiveCalc(i, j) {\n    if (results[i][j] > -1) return results[i][j];\n    if (i === 0 && j === 0) {\n      results[i][j] = distance(curve1[0], curve2[0]);\n    } else if (i > 0 && j === 0) {\n      results[i][j] = Math.max(recursiveCalc(i - 1, 0), distance(curve1[i], curve2[0]));\n    } else if (i === 0 && j > 0) {\n      results[i][j] = Math.max(recursiveCalc(0, j - 1), distance(curve1[0], curve2[j]));\n    } else if (i > 0 && j > 0) {\n      results[i][j] = Math.max(Math.min(recursiveCalc(i - 1, j), recursiveCalc(i - 1, j - 1), recursiveCalc(i, j - 1)), distance(curve1[i], curve2[j]));\n    } else {\n      results[i][j] = Infinity;\n    }\n    return results[i][j];\n  };\n\n  return recursiveCalc(curve1.length - 1, curve2.length - 1);\n};\n\n// break up long segments in the curve into smaller segments of len maxLen or smaller\nvar subdivideCurve = function subdivideCurve(curve) {\n  var maxLen = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.05;\n\n  var newCurve = curve.slice(0, 1);\n  curve.slice(1).forEach(function (point) {\n    var prevPoint = newCurve[newCurve.length - 1];\n    var segLen = distance(point, prevPoint);\n    if (segLen > maxLen) {\n      var numNewPoints = Math.ceil(segLen / maxLen);\n      var newSegLen = segLen / numNewPoints;\n      for (var i = 0; i < numNewPoints; i++) {\n        newCurve.push(_extendPointOnLine(point, prevPoint, -1 * newSegLen * (i + 1)));\n      }\n    } else {\n      newCurve.push(point);\n    }\n  });\n  return newCurve;\n};\n\n// redraw the curve using numPoints equally spaced out along the length of the curve\nvar outlineCurve = function outlineCurve(curve) {\n  var numPoints = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 30;\n\n  var curveLen = length(curve);\n  var segmentLen = curveLen / (numPoints - 1);\n  var outlinePoints = [curve[0]];\n  var endPoint = arrLast(curve);\n  var remainingCurvePoints = curve.slice(1);\n  for (var i = 0; i < numPoints - 2; i++) {\n    var lastPoint = arrLast(outlinePoints);\n    var remainingDist = segmentLen;\n    var outlinePointFound = false;\n    while (!outlinePointFound) {\n      var nextPointDist = distance(lastPoint, remainingCurvePoints[0]);\n      if (nextPointDist < remainingDist) {\n        remainingDist -= nextPointDist;\n        lastPoint = remainingCurvePoints.shift();\n      } else {\n        var nextPoint = _extendPointOnLine(lastPoint, remainingCurvePoints[0], remainingDist - nextPointDist);\n        outlinePoints.push(nextPoint);\n        outlinePointFound = true;\n      }\n    }\n  }\n  outlinePoints.push(endPoint);\n  return outlinePoints;\n};\n\n// translate and scale from https://en.wikipedia.org/wiki/Procrustes_analysis\nvar normalizeCurve = function normalizeCurve(curve) {\n  var outlinedCurve = outlineCurve(curve);\n  var meanX = average(outlinedCurve.map(function (point) {\n    return point.x;\n  }));\n  var meanY = average(outlinedCurve.map(function (point) {\n    return point.y;\n  }));\n  var mean = { x: meanX, y: meanY };\n  var translatedCurve = outlinedCurve.map(function (point) {\n    return subtract(point, mean);\n  });\n  var scale = Math.sqrt(average([Math.pow(translatedCurve[0].x, 2) + Math.pow(translatedCurve[0].y, 2), Math.pow(arrLast(translatedCurve).x, 2) + Math.pow(arrLast(translatedCurve).y, 2)]));\n  var scaledCurve = translatedCurve.map(function (point) {\n    return { x: point.x / scale, y: point.y / scale };\n  });\n  return subdivideCurve(scaledCurve);\n};\n\n// rotate around the origin\nvar rotate = function rotate(curve, theta) {\n  return curve.map(function (point) {\n    return {\n      x: Math.cos(theta) * point.x - Math.sin(theta) * point.y,\n      y: Math.sin(theta) * point.x + Math.cos(theta) * point.y\n    };\n  });\n};\n\n// remove intermediate points that are on the same line as the points to either side\nvar _filterParallelPoints = function _filterParallelPoints(points) {\n  if (points.length < 3) return points;\n  var filteredPoints = [points[0], points[1]];\n  points.slice(2).forEach(function (point, i) {\n    var numFilteredPoints = filteredPoints.length;\n    var curVect = subtract(point, filteredPoints[numFilteredPoints - 1]);\n    var prevVect = subtract(filteredPoints[numFilteredPoints - 1], filteredPoints[numFilteredPoints - 2]);\n    // this is the z coord of the cross-product. If this is 0 then they're parallel\n    var isParallel = curVect.y * prevVect.x - curVect.x * prevVect.y === 0;\n    if (isParallel) {\n      filteredPoints.pop();\n    }\n    filteredPoints.push(point);\n  });\n  return filteredPoints;\n};\n\nfunction getPathString(points) {\n  var close = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var start = round(points[0]);\n  var remainingPoints = points.slice(1);\n  var pathString = 'M ' + start.x + ' ' + start.y;\n  remainingPoints.forEach(function (point) {\n    var roundedPoint = round(point);\n    pathString += ' L ' + roundedPoint.x + ' ' + roundedPoint.y;\n  });\n  if (close) pathString += 'Z';\n  return pathString;\n}\n\n// take points on a path and move their start point backwards by distance\nvar extendStart = function extendStart(points, dist) {\n  var filteredPoints = _filterParallelPoints(points);\n  if (filteredPoints.length < 2) return filteredPoints;\n  var p1 = filteredPoints[1];\n  var p2 = filteredPoints[0];\n  var newStart = _extendPointOnLine(p1, p2, dist);\n  var extendedPoints = filteredPoints.slice(1);\n  extendedPoints.unshift(newStart);\n  return extendedPoints;\n};\n\nmodule.exports = {\n  round: round,\n  equals: equals,\n  distance: distance,\n  getPathString: getPathString,\n  frechetDist: frechetDist,\n  length: length,\n  rotate: rotate,\n  subtract: subtract,\n  extendStart: extendStart,\n  cosineSimilarity: cosineSimilarity,\n  outlineCurve: outlineCurve,\n  _extendPointOnLine: _extendPointOnLine,\n  _filterParallelPoints: _filterParallelPoints,\n  subdivideCurve: subdivideCurve,\n  normalizeCurve: normalizeCurve\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nfunction createElm(elmType) {\n  return global.document.createElementNS('http://www.w3.org/2000/svg', elmType);\n}\n\nfunction attr(elm, name, value) {\n  elm.setAttributeNS(null, name, value);\n}\n\nfunction attrs(elm, attrsMap) {\n  Object.keys(attrsMap).forEach(function (attrName) {\n    return attr(elm, attrName, attrsMap[attrName]);\n  });\n}\n\n// inspired by https://talk.observablehq.com/t/hanzi-writer-renders-incorrectly-inside-an-observable-notebook-on-a-mobile-browser/1898\nfunction urlIdRef(id) {\n  var prefix = '';\n  if (global.location && global.location.href) {\n    prefix = global.location.href.replace(/#[^#]*$/, '');\n  }\n  return 'url(' + prefix + '#' + id + ')';\n}\n\nfunction removeElm(elm) {\n  if (elm) elm.parentNode.removeChild(elm);\n}\n\nmodule.exports = { createElm: createElm, attrs: attrs, attr: attr, removeElm: removeElm, urlIdRef: urlIdRef };\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar Mutation = __webpack_require__(5);\n\nvar _require = __webpack_require__(0),\n    objRepeat = _require.objRepeat;\n\nvar showStrokes = function showStrokes(charName, character, duration) {\n  return [new Mutation('character.' + charName + '.strokes', objRepeat({ opacity: 1, displayPortion: 1 }, character.strokes.length), { duration: duration, force: true })];\n};\n\nvar showCharacter = function showCharacter(charName, character, duration) {\n  return [new Mutation('character.' + charName, {\n    opacity: 1,\n    strokes: objRepeat({ opacity: 1, displayPortion: 1 }, character.strokes.length)\n  }, { duration: duration, force: true })];\n};\n\nvar hideCharacter = function hideCharacter(charName, character, duration) {\n  return [new Mutation('character.' + charName + '.opacity', 0, { duration: duration, force: true })].concat(showStrokes(charName, character, 0));\n};\n\nvar updateColor = function updateColor(colorName, colorVal, duration) {\n  return [new Mutation('options.' + colorName, colorVal, { duration: duration })];\n};\n\nvar highlightStroke = function highlightStroke(stroke, color, speed) {\n  var strokeNum = stroke.strokeNum;\n  var duration = (stroke.getLength() + 600) / (3 * speed);\n  return [new Mutation('character.highlight.strokeColor', color), new Mutation('character.highlight', {\n    opacity: 1,\n    strokes: _defineProperty({}, strokeNum, {\n      displayPortion: 0,\n      opacity: 0\n    })\n  }), new Mutation('character.highlight.strokes.' + strokeNum, {\n    displayPortion: 1,\n    opacity: 1\n  }, { duration: duration }), new Mutation('character.highlight.strokes.' + strokeNum + '.opacity', 0, { duration: duration })];\n};\n\nvar animateStroke = function animateStroke(charName, stroke, speed) {\n  var strokeNum = stroke.strokeNum;\n  var duration = (stroke.getLength() + 600) / (3 * speed);\n  return [new Mutation('character.' + charName, {\n    opacity: 1,\n    strokes: _defineProperty({}, strokeNum, {\n      displayPortion: 0,\n      opacity: 1\n    })\n  }), new Mutation('character.' + charName + '.strokes.' + strokeNum + '.displayPortion', 1, { duration: duration })];\n};\n\nvar animateSingleStroke = function animateSingleStroke(charName, character, strokeNum, speed) {\n  var mutationStateFunc = function mutationStateFunc(state) {\n    var curCharState = state.character[charName];\n    var mutationState = {\n      opacity: 1,\n      strokes: {}\n    };\n    for (var i = 0; i < character.strokes.length; i++) {\n      mutationState.strokes[i] = {\n        opacity: curCharState.opacity * curCharState.strokes[i].opacity\n      };\n    }\n    return mutationState;\n  };\n  return [new Mutation('character.' + charName, mutationStateFunc)].concat(animateStroke(charName, character.strokes[strokeNum], speed));\n};\n\nvar showStroke = function showStroke(charName, strokeNum, duration) {\n  return [new Mutation('character.' + charName + '.strokes.' + strokeNum, {\n    displayPortion: 1,\n    opacity: 1\n  }, { duration: duration, force: true })];\n};\n\nvar animateCharacter = function animateCharacter(charName, character, fadeDuration, speed, delayBetweenStrokes) {\n  var mutations = hideCharacter(charName, character, fadeDuration);\n  mutations = mutations.concat(showStrokes(charName, character, 0));\n  mutations.push(new Mutation('character.' + charName, {\n    opacity: 1,\n    strokes: objRepeat({ opacity: 0 }, character.strokes.length)\n  }, { force: true }));\n  character.strokes.forEach(function (stroke, i) {\n    if (i > 0) mutations.push(new Mutation.Delay(delayBetweenStrokes));\n    mutations = mutations.concat(animateStroke(charName, stroke, speed));\n  });\n  return mutations;\n};\n\nvar animateCharacterLoop = function animateCharacterLoop(charName, character, fadeDuration, speed, delayBetweenStrokes, delayBetweenLoops) {\n  var mutations = animateCharacter(charName, character, fadeDuration, speed, delayBetweenStrokes);\n  mutations.push(new Mutation.Delay(delayBetweenLoops));\n  return mutations;\n};\n\nmodule.exports = {\n  showStrokes: showStrokes,\n  showCharacter: showCharacter,\n  hideCharacter: hideCharacter,\n  highlightStroke: highlightStroke,\n  animateCharacter: animateCharacter,\n  animateCharacterLoop: animateCharacterLoop,\n  animateStroke: animateStroke,\n  animateSingleStroke: animateSingleStroke,\n  showStroke: showStroke,\n  updateColor: updateColor\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _require = __webpack_require__(0),\n    inflate = _require.inflate,\n    performanceNow = _require.performanceNow,\n    requestAnimationFrame = _require.requestAnimationFrame,\n    cancelAnimationFrame = _require.cancelAnimationFrame;\n\n// ------ Mutation class --------\n\nvar getPartialValues = function getPartialValues(startValues, endValues, progress) {\n  var target = {};\n  for (var key in endValues) {\n    // eslint-disable-line guard-for-in\n    // skipping hasOwnProperty check for performance reasons - we shouldn't be passing any objects\n    // in here that aren't plain objects anyway and this is a hot code path\n    var endValue = endValues[key];\n    var startValue = startValues[key];\n    if (endValue >= 0) {\n      target[key] = progress * (endValue - startValue) + startValue;\n    } else {\n      target[key] = getPartialValues(startValue, endValue, progress);\n    }\n  }\n  return target;\n};\n\nvar isAlreadyAtEnd = function isAlreadyAtEnd(startValues, endValues) {\n  for (var key in endValues) {\n    if (endValues.hasOwnProperty(key)) {\n      var endValue = endValues[key];\n      var startValue = startValues[key];\n      if (endValue >= 0) {\n        if (endValue !== startValue) return false;\n      } else if (!isAlreadyAtEnd(startValue, endValue)) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\n\n// from https://github.com/maxwellito/vivus\nvar ease = function ease(x) {\n  return -Math.cos(x * Math.PI) / 2 + 0.5;\n};\n\nfunction Mutation(scope, valuesOrCallable) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  this.scope = scope;\n  this._valuesOrCallable = valuesOrCallable;\n  this._duration = options.duration || 0;\n  this._force = options.force;\n  this._pausedDuration = 0;\n  this._tickBound = this._tick.bind(this);\n  this._startPauseTime = null;\n}\n\nMutation.prototype.run = function (renderState) {\n  var _this = this;\n\n  if (!this._values) this._inflateValues(renderState);\n  if (this._duration === 0) renderState.updateState(this._values);\n  if (this._duration === 0 || isAlreadyAtEnd(renderState.state, this._values)) {\n    return Promise.resolve();\n  }\n  this._renderState = renderState;\n  this._startState = renderState.state;\n  this._startTime = performanceNow();\n  this._frameHandle = requestAnimationFrame(this._tickBound);\n  return new Promise(function (resolve) {\n    _this._resolve = resolve;\n  });\n};\n\nMutation.prototype.pause = function () {\n  if (this._startPauseTime !== null) return;\n  if (this._frameHandle) cancelAnimationFrame(this._frameHandle);\n  this._startPauseTime = performanceNow();\n};\n\nMutation.prototype.resume = function () {\n  if (this._startPauseTime === null) return;\n  this._frameHandle = requestAnimationFrame(this._tickBound);\n  this._pausedDuration += performanceNow() - this._startPauseTime;\n  this._startPauseTime = null;\n};\n\nMutation.prototype._tick = function (timing) {\n  if (this._startPauseTime !== null) return;\n  var progress = Math.min(1, (timing - this._startTime - this._pausedDuration) / this._duration);\n  if (progress === 1) {\n    this._renderState.updateState(this._values);\n    this._frameHandle = null;\n    this.cancel(this._renderState);\n  } else {\n    var easedProgress = ease(progress);\n    this._renderState.updateState(getPartialValues(this._startState, this._values, easedProgress));\n    this._frameHandle = requestAnimationFrame(this._tickBound);\n  }\n};\n\nMutation.prototype._inflateValues = function (renderState) {\n  var values = this._valuesOrCallable;\n  if (typeof this._valuesOrCallable === 'function') {\n    values = this._valuesOrCallable(renderState.state);\n  }\n  this._values = inflate(this.scope, values);\n};\n\nMutation.prototype.cancel = function (renderState) {\n  if (this._resolve) this._resolve();\n  this._resolve = null;\n  if (this._frameHandle) cancelAnimationFrame(this._frameHandle);\n  this._frameHandle = null;\n  if (this._force) {\n    if (!this._values) this._inflateValues(renderState);\n    renderState.updateState(this._values);\n  }\n};\n\n// ------ Mutation.Delay Class --------\n\nfunction Delay(duration) {\n  this._duration = duration;\n  this._startTime = null;\n  this._paused = false;\n}\n\nDelay.prototype.pause = function () {\n  if (this._paused) return;\n  // to pause, clear the timeout and rewrite this._duration with whatever time is remaining\n  var elapsedDelay = performanceNow() - this._startTime;\n  this._duration = Math.max(0, this._duration - elapsedDelay);\n  clearTimeout(this._timeout);\n  this._paused = true;\n};\n\nDelay.prototype.resume = function () {\n  var _this2 = this;\n\n  if (!this._paused) return;\n  this._startTime = performanceNow();\n  this._timeout = setTimeout(function () {\n    return _this2.cancel();\n  }, this._duration);\n  this._paused = false;\n};\n\nDelay.prototype.run = function () {\n  var _this3 = this;\n\n  var timeoutPromise = new Promise(function (resolve) {\n    _this3._resolve = resolve;\n  });\n  this._startTime = performanceNow();\n  this._timeout = setTimeout(function () {\n    return _this3.cancel();\n  }, this._duration);\n  return timeoutPromise;\n};\n\nDelay.prototype.cancel = function () {\n  clearTimeout(this._timeout);\n  if (this._resolve) this._resolve();\n  this._resolve = false;\n};\n\nMutation.Delay = Delay;\n\n// -------------------------------------\n\n\nmodule.exports = Mutation;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction StrokeRendererBase() {}\n\nStrokeRendererBase.prototype._getStrokeDashoffset = function (displayPortion) {\n  return this._pathLength * 0.999 * (1 - displayPortion);\n};\n\nStrokeRendererBase.prototype._getColor = function (_ref) {\n  var strokeColor = _ref.strokeColor,\n      radicalColor = _ref.radicalColor;\n\n  return radicalColor && this._stroke.isInRadical ? radicalColor : strokeColor;\n};\n\nmodule.exports = StrokeRendererBase;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nfunction RenderTargetBase() {}\n\nRenderTargetBase.prototype.addPointerStartListener = function (callback) {\n  var _this = this;\n\n  this.node.addEventListener('mousedown', function (evt) {\n    callback(_this._eventify(evt, _this._getMousePoint));\n  });\n  this.node.addEventListener('touchstart', function (evt) {\n    callback(_this._eventify(evt, _this._getTouchPoint));\n  });\n};\n\nRenderTargetBase.prototype.addPointerMoveListener = function (callback) {\n  var _this2 = this;\n\n  this.node.addEventListener('mousemove', function (evt) {\n    callback(_this2._eventify(evt, _this2._getMousePoint));\n  });\n  this.node.addEventListener('touchmove', function (evt) {\n    callback(_this2._eventify(evt, _this2._getTouchPoint));\n  });\n};\n\nRenderTargetBase.prototype.addPointerEndListener = function (callback) {\n  // TODO: find a way to not need global listeners\n  global.document.addEventListener('mouseup', callback);\n  global.document.addEventListener('touchend', callback);\n};\n\nRenderTargetBase.prototype.getBoundingClientRect = function () {\n  return this.node.getBoundingClientRect();\n};\n\nRenderTargetBase.prototype._eventify = function (evt, pointFunc) {\n  var _this3 = this;\n\n  return {\n    getPoint: function getPoint() {\n      return pointFunc.call(_this3, evt);\n    },\n    preventDefault: function preventDefault() {\n      return evt.preventDefault();\n    }\n  };\n};\n\nRenderTargetBase.prototype._getMousePoint = function (evt) {\n  var box = this.getBoundingClientRect();\n  var x = evt.clientX - box.left;\n  var y = evt.clientY - box.top;\n  return { x: x, y: y };\n};\n\nRenderTargetBase.prototype._getTouchPoint = function (evt) {\n  var box = this.getBoundingClientRect();\n  var x = evt.touches[0].clientX - box.left;\n  var y = evt.touches[0].clientY - box.top;\n  return { x: x, y: y };\n};\n\nmodule.exports = RenderTargetBase;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\n\nvar drawPath = function drawPath(ctx, points) {\n  ctx.beginPath();\n  var start = points[0];\n  var remainingPoints = points.slice(1);\n  ctx.moveTo(start.x, start.y);\n  remainingPoints.forEach(function (point) {\n    ctx.lineTo(point.x, point.y);\n  });\n  ctx.stroke();\n};\n\n// break a path string into a series of canvas path commands\n// only works with the subset of SVG paths used by MakeMeAHanzi data\nvar pathStringToCanvas = function pathStringToCanvas(pathString) {\n  var pathParts = pathString.split(/(^|\\s+)(?=[A-Z])/).filter(function (part) {\n    return part !== ' ';\n  });\n  var commands = [function (ctx) {\n    return ctx.beginPath();\n  }];\n  pathParts.forEach(function (part) {\n    var _part$split = part.split(/\\s+/),\n        _part$split2 = _toArray(_part$split),\n        cmd = _part$split2[0],\n        rawParams = _part$split2.slice(1);\n\n    var params = rawParams.map(function (param) {\n      return parseFloat(param);\n    });\n    if (cmd === 'M') {\n      commands.push(function (ctx) {\n        return ctx.moveTo.apply(ctx, params);\n      });\n    } else if (cmd === 'L') {\n      commands.push(function (ctx) {\n        return ctx.lineTo.apply(ctx, params);\n      });\n    } else if (cmd === 'C') {\n      commands.push(function (ctx) {\n        return ctx.bezierCurveTo.apply(ctx, params);\n      });\n    } else if (cmd === 'Q') {\n      commands.push(function (ctx) {\n        return ctx.quadraticCurveTo.apply(ctx, params);\n      });\n    } else if (cmd === 'Z') {\n      // commands.push((ctx) => ctx.closePath());\n    }\n  });\n  return function (ctx) {\n    return commands.forEach(function (cmd) {\n      return cmd(ctx);\n    });\n  };\n};\n\nmodule.exports = { drawPath: drawPath, pathStringToCanvas: pathStringToCanvas };\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar RenderState = __webpack_require__(10);\nvar parseCharData = __webpack_require__(11);\nvar Positioner = __webpack_require__(14);\nvar Quiz = __webpack_require__(15);\nvar svgRenderer = __webpack_require__(19);\nvar canvasRenderer = __webpack_require__(25);\nvar defaultCharDataLoader = __webpack_require__(31);\nvar LoadingManager = __webpack_require__(32);\nvar characterActions = __webpack_require__(4);\n\nvar _require = __webpack_require__(0),\n    assign = _require.assign,\n    callIfExists = _require.callIfExists,\n    trim = _require.trim,\n    colorStringToVals = _require.colorStringToVals;\n\nvar defaultOptions = {\n  charDataLoader: defaultCharDataLoader,\n  onLoadCharDataError: null,\n  onLoadCharDataSuccess: null,\n  showOutline: true,\n  showCharacter: true,\n  renderer: 'svg',\n\n  // positioning options\n\n  width: null,\n  height: null,\n  padding: 20,\n\n  // animation options\n\n  strokeAnimationSpeed: 1,\n  strokeFadeDuration: 400,\n  strokeHighlightDuration: 200,\n  strokeHighlightSpeed: 2,\n  delayBetweenStrokes: 1000,\n  delayBetweenLoops: 2000,\n\n  // colors\n\n  strokeColor: '#555',\n  radicalColor: null,\n  highlightColor: '#AAF',\n  outlineColor: '#DDD',\n  drawingColor: '#333',\n\n  // quiz options\n\n  leniency: 1,\n  showHintAfterMisses: 3,\n  highlightOnComplete: true,\n  highlightCompleteColor: null,\n\n  // undocumented obscure options\n\n  drawingFadeDuration: 300,\n  drawingWidth: 4,\n  strokeWidth: 2,\n  outlineWidth: 2,\n  rendererOverride: {}\n};\n\nfunction HanziWriter() {\n  if (arguments.length > 0) {\n    var character = void 0;\n    var options = {};\n    var element = arguments.length <= 0 ? undefined : arguments[0];\n    if (arguments.length > 1) {\n      if (typeof (arguments.length <= 1 ? undefined : arguments[1]) === 'string') {\n        // eslint-disable-next-line\n        console.warn('Using new HanziWriter() to set a character is deprecated. Use HanziWriter.create() instead');\n        character = arguments.length <= 1 ? undefined : arguments[1];\n        options = (arguments.length <= 2 ? undefined : arguments[2]) || {};\n      } else {\n        options = arguments.length <= 1 ? undefined : arguments[1];\n      }\n    }\n    this._init(element, options);\n    if (character) {\n      this.setCharacter(character);\n    }\n  }\n}\n\n// ------ public API ------ //\n\nHanziWriter.prototype.showCharacter = function () {\n  var _this = this;\n\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  this._options.showCharacter = true;\n  return this._withData(function () {\n    return _this._renderState.run(characterActions.showCharacter('main', _this._character, typeof options.duration === 'number' ? options.duration : _this._options.strokeFadeDuration)).then(function (res) {\n      return callIfExists(options.onComplete, res);\n    });\n  });\n};\nHanziWriter.prototype.hideCharacter = function () {\n  var _this2 = this;\n\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  this._options.showCharacter = false;\n  return this._withData(function () {\n    return _this2._renderState.run(characterActions.hideCharacter('main', _this2._character, typeof options.duration === 'number' ? options.duration : _this2._options.strokeFadeDuration)).then(function (res) {\n      return callIfExists(options.onComplete, res);\n    });\n  });\n};\nHanziWriter.prototype.animateCharacter = function () {\n  var _this3 = this;\n\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  this.cancelQuiz();\n  return this._withData(function () {\n    return _this3._renderState.run(characterActions.animateCharacter('main', _this3._character, _this3._options.strokeFadeDuration, _this3._options.strokeAnimationSpeed, _this3._options.delayBetweenStrokes)).then(function (res) {\n      return callIfExists(options.onComplete, res);\n    });\n  });\n};\nHanziWriter.prototype.animateStroke = function (strokeNum) {\n  var _this4 = this;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  this.cancelQuiz();\n  return this._withData(function () {\n    return _this4._renderState.run(characterActions.animateSingleStroke('main', _this4._character, strokeNum, _this4._options.strokeAnimationSpeed)).then(function (res) {\n      return callIfExists(options.onComplete, res);\n    });\n  });\n};\nHanziWriter.prototype.highlightStroke = function (strokeNum) {\n  var _this5 = this;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  return this._withData(function () {\n    return _this5._renderState.run(characterActions.highlightStroke(_this5._character.strokes[strokeNum], _this5._options.highlightColor, _this5._options.strokeHighlightSpeed)).then(function (res) {\n      return callIfExists(options.onComplete, res);\n    });\n  });\n};\nHanziWriter.prototype.loopCharacterAnimation = function () {\n  var _this6 = this;\n\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  this.cancelQuiz();\n  return this._withData(function () {\n    return _this6._renderState.run(characterActions.animateCharacterLoop('main', _this6._character, _this6._options.strokeFadeDuration, _this6._options.strokeAnimationSpeed, _this6._options.delayBetweenStrokes, _this6._options.delayBetweenLoops), { loop: true });\n  });\n};\n\nHanziWriter.prototype.pauseAnimation = function () {\n  var _this7 = this;\n\n  return this._withData(function () {\n    return _this7._renderState.pauseAll();\n  });\n};\n\nHanziWriter.prototype.resumeAnimation = function () {\n  var _this8 = this;\n\n  return this._withData(function () {\n    return _this8._renderState.resumeAll();\n  });\n};\n\nHanziWriter.prototype.showOutline = function () {\n  var _this9 = this;\n\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  this._options.showOutline = true;\n  return this._withData(function () {\n    return _this9._renderState.run(characterActions.showCharacter('outline', _this9._character, typeof options.duration === 'number' ? options.duration : _this9._options.strokeFadeDuration)).then(function (res) {\n      return callIfExists(options.onComplete, res);\n    });\n  });\n};\n\nHanziWriter.prototype.hideOutline = function () {\n  var _this10 = this;\n\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  this._options.showOutline = false;\n  return this._withData(function () {\n    return _this10._renderState.run(characterActions.hideCharacter('outline', _this10._character, typeof options.duration === 'number' ? options.duration : _this10._options.strokeFadeDuration)).then(function (res) {\n      return callIfExists(options.onComplete, res);\n    });\n  });\n};\n\nHanziWriter.prototype.updateColor = function (colorName, colorVal) {\n  var _this11 = this;\n\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  return this._withData(function () {\n    var duration = typeof options.duration === 'number' ? options.duration : _this11._options.strokeFadeDuration;\n    var fixedColorVal = colorVal;\n    // If we're removing radical color, tween it to the stroke color\n    if (colorName === 'radicalColor' && !colorVal) {\n      fixedColorVal = _this11._options.strokeColor;\n    }\n    var mappedColor = colorStringToVals(fixedColorVal);\n    _this11._options[colorName] = colorVal;\n    var mutation = characterActions.updateColor(colorName, mappedColor, duration);\n    // make sure to set radicalColor back to null after the transition finishes if val == null\n    if (colorName === 'radicalColor' && !colorVal) {\n      mutation = mutation.concat(characterActions.updateColor(colorName, null, 0));\n    }\n    return _this11._renderState.run(mutation).then(function (res) {\n      return callIfExists(options.onComplete, res);\n    });\n  });\n};\n\nHanziWriter.prototype.quiz = function () {\n  var _this12 = this;\n\n  var quizOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  this._withData(function () {\n    _this12.cancelQuiz();\n    _this12._quiz = new Quiz(_this12._character, _this12._renderState, _this12._positioner);\n    _this12._quiz.startQuiz(assign({}, _this12._options, quizOptions));\n  });\n};\n\nHanziWriter.prototype.cancelQuiz = function () {\n  if (this._quiz) {\n    this._quiz.cancel();\n    this._quiz = null;\n  }\n};\n\nHanziWriter.prototype.setCharacter = function (char) {\n  var _this13 = this;\n\n  this.cancelQuiz();\n  this._char = char;\n  if (this._hanziWriterRenderer) this._hanziWriterRenderer.destroy();\n  if (this._renderState) this._renderState.cancelAll();\n  this._hanziWriterRenderer = null;\n  this._withDataPromise = this._loadingManager.loadCharData(char).then(function (pathStrings) {\n    if (_this13._loadingManager.loadingFailed) return;\n\n    _this13._character = parseCharData(char, pathStrings);\n    _this13._positioner = new Positioner(_this13._options);\n    var hanziWriterRenderer = new _this13._renderer.HanziWriterRenderer(_this13._character, _this13._positioner);\n    _this13._hanziWriterRenderer = hanziWriterRenderer;\n    _this13._renderState = new RenderState(_this13._character, _this13._options, function (nextState) {\n      hanziWriterRenderer.render(nextState);\n    });\n    _this13._hanziWriterRenderer.mount(_this13.target);\n    _this13._hanziWriterRenderer.render(_this13._renderState.state);\n  });\n  return this._withDataPromise;\n};\n\n// ------------- //\n\nHanziWriter.prototype._init = function (element, options) {\n  var renderer = options.renderer === 'canvas' ? canvasRenderer : svgRenderer;\n  var rendererOverride = options.rendererOverride || {};\n  this._renderer = {\n    HanziWriterRenderer: rendererOverride.HanziWriterRenderer || renderer.HanziWriterRenderer,\n    createRenderTarget: rendererOverride.createRenderTarget || renderer.createRenderTarget\n  };\n  // wechat miniprogram component needs direct access to the render target, so this is public\n  this.target = this._renderer.createRenderTarget(element, options.width, options.height);\n  this._options = this._assignOptions(options);\n  this._loadingManager = new LoadingManager(this._options);\n  this._setupListeners();\n  this._quiz = null;\n  return this;\n};\n\nHanziWriter.prototype._assignOptions = function (options) {\n  var mergedOptions = assign({}, defaultOptions, options);\n\n  // backfill strokeAnimationSpeed if deprecated strokeAnimationDuration is provided instead\n  if (options.strokeAnimationDuration && !options.strokeAnimationSpeed) {\n    mergedOptions.strokeAnimationSpeed = 500 / mergedOptions.strokeAnimationDuration;\n  }\n  if (options.strokeHighlightDuration && !options.strokeHighlightSpeed) {\n    mergedOptions.strokeHighlightSpeed = 500 / mergedOptions.strokeHighlightDuration;\n  }\n\n  if (!options.highlightCompleteColor) {\n    mergedOptions.highlightCompleteColor = mergedOptions.highlightColor;\n  }\n\n  return this._fillWidthAndHeight(mergedOptions);\n};\n\n// returns a new options object with width and height filled in if missing\nHanziWriter.prototype._fillWidthAndHeight = function (options) {\n  var filledOpts = assign({}, options);\n  if (filledOpts.width && !filledOpts.height) {\n    filledOpts.height = filledOpts.width;\n  } else if (filledOpts.height && !filledOpts.width) {\n    filledOpts.width = filledOpts.height;\n  } else if (!filledOpts.width && !filledOpts.height) {\n    var _target$getBoundingCl = this.target.getBoundingClientRect(),\n        width = _target$getBoundingCl.width,\n        height = _target$getBoundingCl.height;\n\n    var minDim = Math.min(width, height);\n    filledOpts.width = minDim;\n    filledOpts.height = minDim;\n  }\n  return filledOpts;\n};\n\nHanziWriter.prototype._withData = function (func) {\n  var _this14 = this;\n\n  // if this._loadingManager.loadingFailed, then loading failed before this method was called\n  if (this._loadingManager.loadingFailed) {\n    throw Error('Failed to load character data. Call setCharacter and try again.');\n  }\n  return this._withDataPromise.then(function () {\n    if (!_this14._loadingManager.loadingFailed) {\n      return func();\n    }\n  });\n};\n\nHanziWriter.prototype._setupListeners = function () {\n  var _this15 = this;\n\n  this.target.addPointerStartListener(function (evt) {\n    if (!_this15._quiz) return;\n    evt.preventDefault();\n    _this15._forwardToQuiz('startUserStroke', evt.getPoint());\n  });\n  this.target.addPointerMoveListener(function (evt) {\n    if (!_this15._quiz) return;\n    evt.preventDefault();\n    _this15._forwardToQuiz('continueUserStroke', evt.getPoint());\n  });\n  this.target.addPointerEndListener(function () {\n    return _this15._forwardToQuiz('endUserStroke');\n  });\n};\n\nHanziWriter.prototype._forwardToQuiz = function (method) {\n  var _quiz;\n\n  if (!this._quiz) return;\n\n  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  (_quiz = this._quiz)[method].apply(_quiz, args);\n};\n\n// --- Static Public API --- //\n\nHanziWriter.create = function (element, character) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var writer = new HanziWriter(element, options);\n  writer.setCharacter(character);\n  return writer;\n};\n\nvar lastLoadingManager = null;\nvar lastLoadingOptions = null;\n\nHanziWriter.loadCharacterData = function (character) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var loadingManager = void 0;\n  if (lastLoadingManager && lastLoadingOptions === options) {\n    loadingManager = lastLoadingManager;\n  } else {\n    loadingManager = new LoadingManager(assign({}, defaultOptions, options));\n  }\n  lastLoadingManager = loadingManager;\n  lastLoadingOptions = options;\n  return loadingManager.loadCharData(character);\n};\n\nHanziWriter.getScalingTransform = function (width, height) {\n  var padding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  var positioner = new Positioner({ width: width, height: height, padding: padding });\n  return {\n    x: positioner.xOffset,\n    y: positioner.yOffset,\n    scale: positioner.scale,\n    transform: trim('\\n      translate(' + positioner.xOffset + ', ' + (positioner.height - positioner.yOffset) + ')\\n      scale(' + positioner.scale + ', ' + -1 * positioner.scale + ')\\n    ').replace(/\\s+/g, ' ')\n  };\n};\n\nmodule.exports = HanziWriter;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _require = __webpack_require__(0),\n    copyAndMergeDeep = _require.copyAndMergeDeep,\n    colorStringToVals = _require.colorStringToVals;\n\nfunction RenderState(character, options, onStateChange) {\n  this._onStateChange = onStateChange;\n  this._mutationChains = [];\n  this.state = {\n    options: {\n      drawingFadeDuration: options.drawingFadeDuration,\n      drawingWidth: options.drawingWidth,\n      drawingColor: colorStringToVals(options.drawingColor),\n      strokeColor: colorStringToVals(options.strokeColor),\n      outlineColor: colorStringToVals(options.outlineColor),\n      radicalColor: colorStringToVals(options.radicalColor || options.strokeColor),\n      highlightColor: colorStringToVals(options.highlightColor)\n    },\n    character: {\n      main: {\n        opacity: options.showCharacter ? 1 : 0,\n        strokes: {}\n      },\n      outline: {\n        opacity: options.showOutline ? 1 : 0,\n        strokes: {}\n      },\n      highlight: {\n        opacity: 1,\n        strokes: {}\n      }\n    },\n    userStrokes: null\n  };\n  for (var i = 0; i < character.strokes.length; i++) {\n    this.state.character.main.strokes[i] = {\n      opacity: 1,\n      displayPortion: 1\n    };\n    this.state.character.outline.strokes[i] = {\n      opacity: 1,\n      displayPortion: 1\n    };\n    this.state.character.highlight.strokes[i] = {\n      opacity: 0,\n      displayPortion: 1\n    };\n  }\n}\n\nRenderState.prototype.updateState = function (stateChanges) {\n  var nextState = copyAndMergeDeep(this.state, stateChanges);\n  this._onStateChange(nextState, this.state);\n  this.state = nextState;\n};\n\nRenderState.prototype.run = function (mutations) {\n  var _this = this;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var scopes = mutations.map(function (mut) {\n    return mut.scope;\n  }).filter(function (x) {\n    return x;\n  });\n  this.cancelMutations(scopes);\n  return new Promise(function (resolve) {\n    var mutationChain = {\n      _isActive: true,\n      _index: 0,\n      _resolve: resolve,\n      _mutations: mutations,\n      _loop: options.loop,\n      _scopes: scopes\n    };\n    _this._mutationChains.push(mutationChain);\n    _this._run(mutationChain);\n  });\n};\n\nRenderState.prototype._run = function (mutationChain) {\n  var _this2 = this;\n\n  if (!mutationChain._isActive) return;\n  var mutations = mutationChain._mutations;\n  if (mutationChain._index >= mutations.length) {\n    if (mutationChain._loop) {\n      mutationChain._index = 0; // eslint-disable-line no-param-reassign\n    } else {\n      mutationChain._isActive = false; // eslint-disable-line no-param-reassign\n      this._mutationChains = this._mutationChains.filter(function (chain) {\n        return chain !== mutationChain;\n      });\n      // The chain is done - resolve the promise to signal it finished successfully\n      mutationChain._resolve({ canceled: false });\n      return;\n    }\n  }\n\n  var activeMutation = mutationChain._mutations[mutationChain._index];\n  activeMutation.run(this).then(function () {\n    if (mutationChain._isActive) {\n      mutationChain._index++; // eslint-disable-line no-param-reassign\n      _this2._run(mutationChain);\n    }\n  });\n};\n\nRenderState.prototype._getActiveMutations = function () {\n  return this._mutationChains.map(function (chain) {\n    return chain._mutations[chain._index];\n  });\n};\n\nRenderState.prototype.pauseAll = function () {\n  this._getActiveMutations().forEach(function (mutation) {\n    return mutation.pause();\n  });\n};\n\nRenderState.prototype.resumeAll = function () {\n  this._getActiveMutations().forEach(function (mutation) {\n    return mutation.resume();\n  });\n};\n\nRenderState.prototype.cancelMutations = function (scopes) {\n  var _this3 = this;\n\n  this._mutationChains.forEach(function (chain) {\n    chain._scopes.forEach(function (chainScope) {\n      scopes.forEach(function (scope) {\n        if (chainScope.indexOf(scope) >= 0 || scope.indexOf(chainScope) >= 0) {\n          _this3._cancelMutationChain(chain);\n        }\n      });\n    });\n  });\n};\n\nRenderState.prototype.cancelAll = function () {\n  this.cancelMutations(['']);\n};\n\nRenderState.prototype._cancelMutationChain = function (mutationChain) {\n  mutationChain._isActive = false; // eslint-disable-line no-param-reassign\n  for (var i = mutationChain._index; i < mutationChain._mutations.length; i++) {\n    mutationChain._mutations[i].cancel(this);\n  }\n  if (mutationChain._resolve) {\n    mutationChain._resolve({ canceled: true });\n  }\n  this._mutationChains = this._mutationChains.filter(function (chain) {\n    return chain !== mutationChain;\n  });\n};\n\nmodule.exports = RenderState;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar Stroke = __webpack_require__(12);\nvar Character = __webpack_require__(13);\n\nvar generateStrokes = function generateStrokes(charJson) {\n  var isInRadical = function isInRadical(strokeNum) {\n    return charJson.radStrokes && charJson.radStrokes.indexOf(strokeNum) >= 0;\n  };\n\n  return charJson.strokes.map(function (path, index) {\n    var points = charJson.medians[index].map(function (pointData) {\n      var _pointData = _slicedToArray(pointData, 2),\n          x = _pointData[0],\n          y = _pointData[1];\n\n      return { x: x, y: y };\n    });\n    return new Stroke(path, points, index, isInRadical(index));\n  });\n};\n\nvar parseCharData = function parseCharData(symbol, charJson) {\n  var strokes = generateStrokes(charJson);\n  return new Character(symbol, strokes);\n};\n\nmodule.exports = parseCharData;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _require = __webpack_require__(2),\n    subtract = _require.subtract,\n    distance = _require.distance,\n    length = _require.length;\n\nfunction Stroke(path, points, strokeNum) {\n  var isInRadical = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  this.path = path;\n  this.points = points;\n  this.strokeNum = strokeNum;\n  this.isInRadical = isInRadical;\n}\n\nStroke.prototype.getStartingPoint = function () {\n  return this.points[0];\n};\n\nStroke.prototype.getEndingPoint = function () {\n  return this.points[this.points.length - 1];\n};\n\nStroke.prototype.getLength = function () {\n  return length(this.points);\n};\n\nStroke.prototype.getVectors = function () {\n  var lastPoint = this.points[0];\n  var pointsSansFirst = this.points.slice(1);\n  return pointsSansFirst.map(function (point) {\n    var vector = subtract(point, lastPoint);\n    lastPoint = point;\n    return vector;\n  });\n};\n\nStroke.prototype.getDistance = function (point) {\n  var distances = this.points.map(function (strokePoint) {\n    return distance(strokePoint, point);\n  });\n  return Math.min.apply(Math, distances);\n};\n\nStroke.prototype.getAverageDistance = function (points) {\n  var _this = this;\n\n  var totalDist = points.reduce(function (acc, point) {\n    return acc + _this.getDistance(point);\n  }, 0);\n  return totalDist / points.length;\n};\n\nmodule.exports = Stroke;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction Character(symbol, strokes) {\n  this.symbol = symbol;\n  this.strokes = strokes;\n}\n\nmodule.exports = Character;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// All makemeahanzi characters have the same bounding box\nvar CHARACTER_BOUNDS = [{ x: 0, y: -124 }, { x: 1024, y: 900 }];\n\nfunction Positioner(options) {\n  this._options = options;\n  this.width = options.width;\n  this.height = options.height;\n  this._calculateScaleAndOffset();\n}\n\nPositioner.prototype.convertExternalPoint = function (point) {\n  var x = (point.x - this.xOffset) / this.scale;\n  var y = (this.height - this.yOffset - point.y) / this.scale;\n  return { x: x, y: y };\n};\n\nPositioner.prototype._calculateScaleAndOffset = function () {\n  var bounds = CHARACTER_BOUNDS;\n  var preScaledWidth = bounds[1].x - bounds[0].x;\n  var preScaledHeight = bounds[1].y - bounds[0].y;\n  var effectiveWidth = this.width - 2 * this._options.padding;\n  var effectiveHeight = this.height - 2 * this._options.padding;\n  var scaleX = effectiveWidth / preScaledWidth;\n  var scaleY = effectiveHeight / preScaledHeight;\n\n  this.scale = Math.min(scaleX, scaleY);\n\n  var xCenteringBuffer = this._options.padding + (effectiveWidth - this.scale * preScaledWidth) / 2;\n  var yCenteringBuffer = this._options.padding + (effectiveHeight - this.scale * preScaledHeight) / 2;\n\n  this.xOffset = -1 * bounds[0].x * this.scale + xCenteringBuffer;\n  this.yOffset = -1 * bounds[0].y * this.scale + yCenteringBuffer;\n};\n\nmodule.exports = Positioner;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar strokeMatches = __webpack_require__(16);\nvar UserStroke = __webpack_require__(17);\n\nvar _require = __webpack_require__(0),\n    callIfExists = _require.callIfExists,\n    counter = _require.counter;\n\nvar quizActions = __webpack_require__(18);\nvar geometry = __webpack_require__(2);\nvar characterActions = __webpack_require__(4);\n\nvar getDrawnPath = function getDrawnPath(userStroke) {\n  return {\n    pathString: geometry.getPathString(userStroke.externalPoints),\n    points: userStroke.points.map(function (point) {\n      return geometry.round(point);\n    })\n  };\n};\n\nfunction Quiz(character, renderState, positioner) {\n  this._character = character;\n  this._renderState = renderState;\n  this._isActive = false;\n  this._positioner = positioner;\n}\n\nQuiz.prototype.startQuiz = function (options) {\n  this._isActive = true;\n  this._options = options;\n  this._currentStrokeIndex = 0;\n  this._numRecentMistakes = 0;\n  this._totalMistakes = 0;\n  this._renderState.run(quizActions.startQuiz(this._character, options.strokeFadeDuration));\n};\n\nQuiz.prototype.startUserStroke = function (externalPoint) {\n  var point = this._positioner.convertExternalPoint(externalPoint);\n  if (!this._isActive) return null;\n  if (this._userStroke) return this.endUserStroke();\n  var strokeId = counter();\n  this._userStroke = new UserStroke(strokeId, point, externalPoint);\n  this._renderState.run(quizActions.startUserStroke(strokeId, point));\n};\n\nQuiz.prototype.continueUserStroke = function (externalPoint) {\n  if (!this._userStroke) return;\n  var point = this._positioner.convertExternalPoint(externalPoint);\n  this._userStroke.appendPoint(point, externalPoint);\n  var nextPoints = this._userStroke.points.slice(0);\n  this._renderState.run(quizActions.updateUserStroke(this._userStroke.id, nextPoints));\n};\n\nQuiz.prototype.endUserStroke = function () {\n  if (!this._userStroke) return;\n\n  this._renderState.run(quizActions.removeUserStroke(this._userStroke.id, this._options.drawingFadeDuration));\n  // skip single-point strokes\n  if (this._userStroke.points.length === 1) {\n    this._userStroke = null;\n    return;\n  }\n\n  var currentStroke = this._getCurrentStroke();\n  var isOutlineVisible = this._renderState.state.character.outline.opacity > 0;\n  var isMatch = strokeMatches(this._userStroke, this._character, this._currentStrokeIndex, {\n    isOutlineVisible: isOutlineVisible,\n    leniency: this._options.leniency\n  });\n\n  if (isMatch) {\n    this._handleSuccess();\n  } else {\n    this._handleFailure();\n    if (this._numRecentMistakes >= this._options.showHintAfterMisses && this._options.showHintAfterMisses !== false) {\n      this._renderState.run(quizActions.highlightStroke(currentStroke, this._options.highlightColor, this._options.strokeHighlightSpeed));\n    }\n  }\n  this._userStroke = null;\n};\n\nQuiz.prototype.cancel = function () {\n  this._isActive = false;\n  if (this._userStroke) {\n    this._renderState.run(quizActions.removeUserStroke(this._userStroke.id, this._options.drawingFadeDuration));\n  }\n};\n\nQuiz.prototype._handleSuccess = function () {\n  callIfExists(this._options.onCorrectStroke, {\n    character: this._character.symbol,\n    strokeNum: this._currentStrokeIndex,\n    mistakesOnStroke: this._numRecentMistakes,\n    totalMistakes: this._totalMistakes,\n    strokesRemaining: this._character.strokes.length - this._currentStrokeIndex - 1,\n    drawnPath: getDrawnPath(this._userStroke)\n  });\n  var animation = characterActions.showStroke('main', this._currentStrokeIndex, this._options.strokeFadeDuration);\n  this._currentStrokeIndex += 1;\n  this._numRecentMistakes = 0;\n\n  if (this._currentStrokeIndex === this._character.strokes.length) {\n    this._isActive = false;\n    callIfExists(this._options.onComplete, {\n      character: this._character.symbol,\n      totalMistakes: this._totalMistakes\n    });\n    if (this._options.highlightOnComplete) {\n      animation = animation.concat(quizActions.highlightCompleteChar(this._character, this._options.highlightCompleteColor, this._options.strokeHighlightDuration * 2));\n    }\n  }\n  this._renderState.run(animation);\n};\n\nQuiz.prototype._handleFailure = function () {\n  this._numRecentMistakes += 1;\n  this._totalMistakes += 1;\n  callIfExists(this._options.onMistake, {\n    character: this._character.symbol,\n    strokeNum: this._currentStrokeIndex,\n    mistakesOnStroke: this._numRecentMistakes,\n    totalMistakes: this._totalMistakes,\n    strokesRemaining: this._character.strokes.length - this._currentStrokeIndex,\n    drawnPath: getDrawnPath(this._userStroke)\n  });\n};\n\nQuiz.prototype._getCurrentStroke = function () {\n  return this._character.strokes[this._currentStrokeIndex];\n};\n\nmodule.exports = Quiz;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _require = __webpack_require__(0),\n    average = _require.average,\n    assign = _require.assign;\n\nvar _require2 = __webpack_require__(2),\n    cosineSimilarity = _require2.cosineSimilarity,\n    equals = _require2.equals,\n    frechetDist = _require2.frechetDist,\n    distance = _require2.distance,\n    subtract = _require2.subtract,\n    normalizeCurve = _require2.normalizeCurve,\n    rotate = _require2.rotate,\n    length = _require2.length;\n\nvar AVG_DIST_THRESHOLD = 350; // bigger = more lenient\nvar COSINE_SIMILARITY_THRESHOLD = 0; // -1 to 1, smaller = more lenient\nvar START_AND_END_DIST_THRESHOLD = 250; // bigger = more lenient\nvar FRECHET_THRESHOLD = 0.40; // bigger = more lenient\nvar MIN_LEN_THRESHOLD = 0.35; // smaller = more lenient\n\nvar startAndEndMatches = function startAndEndMatches(points, closestStroke, leniency) {\n  var startingDist = distance(closestStroke.getStartingPoint(), points[0]);\n  var endingDist = distance(closestStroke.getEndingPoint(), points[points.length - 1]);\n  return startingDist <= START_AND_END_DIST_THRESHOLD * leniency && endingDist <= START_AND_END_DIST_THRESHOLD * leniency;\n};\n\n// returns a list of the direction of all segments in the line connecting the points\nvar getEdgeVectors = function getEdgeVectors(points) {\n  var vectors = [];\n  var lastPoint = points[0];\n  points.slice(1).forEach(function (point) {\n    vectors.push(subtract(point, lastPoint));\n    lastPoint = point;\n  });\n  return vectors;\n};\n\nvar directionMatches = function directionMatches(points, stroke) {\n  var edgeVectors = getEdgeVectors(points);\n  var strokeVectors = stroke.getVectors();\n  var similarities = edgeVectors.map(function (edgeVector) {\n    var strokeSimilarities = strokeVectors.map(function (strokeVector) {\n      return cosineSimilarity(strokeVector, edgeVector);\n    });\n    return Math.max.apply(Math, strokeSimilarities);\n  });\n  var avgSimilarity = average(similarities);\n  return avgSimilarity > COSINE_SIMILARITY_THRESHOLD;\n};\n\nvar lengthMatches = function lengthMatches(points, stroke, leniency) {\n  return leniency * (length(points) + 25) / (stroke.getLength() + 25) >= MIN_LEN_THRESHOLD;\n};\n\nvar stripDuplicates = function stripDuplicates(points) {\n  if (points.length < 2) return points;\n  var dedupedPoints = [points[0]];\n  points.slice(1).forEach(function (point) {\n    if (!equals(point, dedupedPoints[dedupedPoints.length - 1])) {\n      dedupedPoints.push(point);\n    }\n  });\n  return dedupedPoints;\n};\n\nvar SHAPE_FIT_ROTATIONS = [Math.PI / 16, Math.PI / 32, 0, -1 * Math.PI / 32, -1 * Math.PI / 16];\n\nvar shapeFit = function shapeFit(curve1, curve2, leniency) {\n  var normCurve1 = normalizeCurve(curve1);\n  var normCurve2 = normalizeCurve(curve2);\n  var minDist = Infinity;\n  SHAPE_FIT_ROTATIONS.forEach(function (theta) {\n    var dist = frechetDist(normCurve1, rotate(normCurve2, theta));\n    if (dist < minDist) {\n      minDist = dist;\n    }\n  });\n  return minDist <= FRECHET_THRESHOLD * leniency;\n};\n\nvar getMatchData = function getMatchData(points, stroke, options) {\n  var _options$leniency = options.leniency,\n      leniency = _options$leniency === undefined ? 1 : _options$leniency,\n      _options$isOutlineVis = options.isOutlineVisible,\n      isOutlineVisible = _options$isOutlineVis === undefined ? false : _options$isOutlineVis;\n\n  var avgDist = stroke.getAverageDistance(points);\n  var distMod = isOutlineVisible || stroke.strokeNum > 0 ? 0.5 : 1;\n  var withinDistThresh = avgDist <= AVG_DIST_THRESHOLD * distMod * leniency;\n  // short circuit for faster matching\n  if (!withinDistThresh) {\n    return { isMatch: false, avgDist: avgDist };\n  }\n  var startAndEndMatch = startAndEndMatches(points, stroke, leniency);\n  var directionMatch = directionMatches(points, stroke);\n  var shapeMatch = shapeFit(points, stroke.points, leniency);\n  var lengthMatch = lengthMatches(points, stroke, leniency);\n  return {\n    isMatch: withinDistThresh && startAndEndMatch && directionMatch && shapeMatch && lengthMatch,\n    avgDist: avgDist\n  };\n};\n\nvar strokeMatches = function strokeMatches(userStroke, character, strokeNum) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  var points = stripDuplicates(userStroke.points);\n  if (points.length < 2) return null;\n\n  var strokeMatchData = getMatchData(points, character.strokes[strokeNum], options);\n  if (!strokeMatchData.isMatch) return false;\n\n  // if there is a better match among strokes the user hasn't drawn yet, the user probably drew the wrong stroke\n  var laterStrokes = character.strokes.slice(strokeNum + 1);\n  var closestMatchDist = strokeMatchData.avgDist;\n  for (var i = 0; i < laterStrokes.length; i++) {\n    var laterMatchData = getMatchData(points, laterStrokes[i], options);\n    if (laterMatchData.isMatch && laterMatchData.avgDist < closestMatchDist) {\n      closestMatchDist = laterMatchData.avgDist;\n    }\n  }\n  // if there's a better match, rather that returning false automatically, try reducing leniency instead\n  // if leniency is already really high we can allow some similar strokes to pass\n  if (closestMatchDist < strokeMatchData.avgDist) {\n    // adjust leniency between 0.3 and 0.6 depending on how much of a better match the new match is\n    var leniencyAdjustment = 0.6 * (closestMatchDist + strokeMatchData.avgDist) / (2 * strokeMatchData.avgDist);\n    var newLeniency = (options.leniency || 1) * leniencyAdjustment;\n    var adjustedOptions = assign({}, options, { leniency: newLeniency });\n    var adjustedStrokeMatchData = getMatchData(points, character.strokes[strokeNum], adjustedOptions);\n    return adjustedStrokeMatchData.isMatch;\n  }\n  return true;\n};\n\nmodule.exports = strokeMatches;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction UserStroke(id, startingPoint, startingExternalPoint) {\n  this.id = id;\n  this.points = [startingPoint];\n  this.externalPoints = [startingExternalPoint];\n}\n\nUserStroke.prototype.appendPoint = function (point, externalPoint) {\n  this.points.push(point);\n  this.externalPoints.push(externalPoint);\n};\n\nmodule.exports = UserStroke;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar Mutation = __webpack_require__(5);\nvar characterActions = __webpack_require__(4);\n\nvar _require = __webpack_require__(0),\n    objRepeat = _require.objRepeat;\n\nvar startQuiz = function startQuiz(character, fadeDuration) {\n  return characterActions.hideCharacter('main', character, fadeDuration).concat([new Mutation('character.highlight', {\n    opacity: 1,\n    strokes: objRepeat({ opacity: 0 }, character.strokes.length)\n  }, { force: true }), new Mutation('character.main', {\n    opacity: 1,\n    strokes: objRepeat({ opacity: 0 }, character.strokes.length)\n  }, { force: true })]);\n};\n\nvar startUserStroke = function startUserStroke(id, point) {\n  return [new Mutation('quiz.activeUserStrokeId', id, { force: true }), new Mutation('userStrokes.' + id, {\n    points: [point],\n    opacity: 1\n  }, { force: true })];\n};\n\nvar updateUserStroke = function updateUserStroke(userStrokeId, points) {\n  return [new Mutation('userStrokes.' + userStrokeId + '.points', points, { force: true })];\n};\n\nvar removeUserStroke = function removeUserStroke(userStrokeId, duration) {\n  return [new Mutation('userStrokes.' + userStrokeId + '.opacity', 0, { duration: duration }), new Mutation('userStrokes.' + userStrokeId, null, { force: true })];\n};\n\nvar highlightCompleteChar = function highlightCompleteChar(character, color, duration) {\n  return [new Mutation('character.highlight.strokeColor', color)].concat(characterActions.hideCharacter('highlight', character)).concat(characterActions.showCharacter('highlight', character, duration / 2)).concat(characterActions.hideCharacter('highlight', character, duration / 2));\n};\n\nmodule.exports = {\n  highlightCompleteChar: highlightCompleteChar,\n  highlightStroke: characterActions.highlightStroke,\n  startQuiz: startQuiz,\n  startUserStroke: startUserStroke,\n  updateUserStroke: updateUserStroke,\n  removeUserStroke: removeUserStroke\n};\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar HanziWriterRenderer = __webpack_require__(20);\nvar RenderTarget = __webpack_require__(24);\n\nmodule.exports = {\n  HanziWriterRenderer: HanziWriterRenderer,\n  createRenderTarget: RenderTarget.init\n};\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar CharacterRenderer = __webpack_require__(21);\nvar UserStrokeRenderer = __webpack_require__(23);\n\nvar _require = __webpack_require__(0),\n    assign = _require.assign;\n\nvar svg = __webpack_require__(3);\n\nfunction HanziWriterRenderer(character, positioner) {\n  this._character = character;\n  this._positioner = positioner;\n  this._mainCharRenderer = new CharacterRenderer(character);\n  this._outlineCharRenderer = new CharacterRenderer(character);\n  this._highlightCharRenderer = new CharacterRenderer(character);\n  this._userStrokeRenderers = {};\n}\n\nHanziWriterRenderer.prototype.mount = function (target) {\n  var positionedTarget = target.createSubRenderTarget();\n  var group = positionedTarget.svg;\n  svg.attr(group, 'transform', '\\n    translate(' + this._positioner.xOffset + ', ' + (this._positioner.height - this._positioner.yOffset) + ')\\n    scale(' + this._positioner.scale + ', ' + -1 * this._positioner.scale + ')\\n  ');\n  this._outlineCharRenderer.mount(positionedTarget);\n  this._mainCharRenderer.mount(positionedTarget);\n  this._highlightCharRenderer.mount(positionedTarget);\n  this._positionedTarget = positionedTarget;\n};\n\nHanziWriterRenderer.prototype.render = function (props) {\n  var _this = this;\n\n  this._outlineCharRenderer.render({\n    opacity: props.character.outline.opacity,\n    strokes: props.character.outline.strokes,\n    strokeColor: props.options.outlineColor\n  });\n  this._mainCharRenderer.render({\n    opacity: props.character.main.opacity,\n    strokes: props.character.main.strokes,\n    strokeColor: props.options.strokeColor,\n    radicalColor: props.options.radicalColor\n  });\n  this._highlightCharRenderer.render({\n    opacity: props.character.highlight.opacity,\n    strokes: props.character.highlight.strokes,\n    strokeColor: props.options.highlightColor\n  });\n\n  var userStrokes = props.userStrokes || {};\n  Object.keys(this._userStrokeRenderers).forEach(function (userStrokeId) {\n    if (!userStrokes[userStrokeId]) {\n      _this._userStrokeRenderers[userStrokeId].destroy();\n      delete _this._userStrokeRenderers[userStrokeId];\n    }\n  });\n\n  Object.keys(userStrokes).forEach(function (userStrokeId) {\n    if (!userStrokes[userStrokeId]) return;\n    var userStrokeProps = assign({\n      strokeWidth: props.options.drawingWidth,\n      strokeColor: props.options.drawingColor\n    }, userStrokes[userStrokeId]);\n    var strokeRenderer = _this._userStrokeRenderers[userStrokeId];\n    if (!strokeRenderer) {\n      strokeRenderer = new UserStrokeRenderer();\n      strokeRenderer.mount(_this._positionedTarget);\n      _this._userStrokeRenderers[userStrokeId] = strokeRenderer;\n    }\n    strokeRenderer.render(userStrokeProps);\n  });\n};\n\nHanziWriterRenderer.prototype.destroy = function () {\n  svg.removeElm(this._positionedTarget.svg);\n  this._positionedTarget.defs.innerHTML = '';\n};\n\nmodule.exports = HanziWriterRenderer;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _require = __webpack_require__(0),\n    isMsBrowser = _require.isMsBrowser;\n\nvar StrokeRenderer = __webpack_require__(22);\n\nfunction CharacterRenderer(character) {\n  this._oldProps = {};\n  this._strokeRenderers = character.strokes.map(function (stroke) {\n    return new StrokeRenderer(stroke);\n  });\n}\n\nCharacterRenderer.prototype.mount = function (target) {\n  var subTarget = target.createSubRenderTarget();\n  this._group = subTarget.svg;\n  this._strokeRenderers.forEach(function (strokeRenderer, i) {\n    strokeRenderer.mount(subTarget);\n  });\n};\n\nCharacterRenderer.prototype.render = function (props) {\n  if (props === this._oldProps) return;\n  if (props.opacity !== this._oldProps.opacity) {\n    this._group.style.opacity = props.opacity;\n    // MS browsers seem to have a bug where if SVG is set to display:none, it sometimes breaks.\n    // More info: https://github.com/chanind/hanzi-writer/issues/164\n    // this is just a perf improvement, so disable for MS browsers\n    if (!isMsBrowser) {\n      if (props.opacity === 0) {\n        this._group.style.display = 'none';\n      } else if (this._oldProps.opacity === 0) {\n        this._group.style.removeProperty('display');\n      }\n    }\n  }\n  var colorsChanged = !this._oldProps || props.strokeColor !== this._oldProps.strokeColor || props.radicalColor !== this._oldProps.radicalColor;\n  if (colorsChanged || props.strokes !== this._oldProps.strokes) {\n    for (var i = 0; i < this._strokeRenderers.length; i++) {\n      if (!colorsChanged && this._oldProps.strokes && props.strokes[i] === this._oldProps.strokes[i]) continue;\n      this._strokeRenderers[i].render({\n        strokeColor: props.strokeColor,\n        radicalColor: props.radicalColor,\n        opacity: props.strokes[i].opacity,\n        displayPortion: props.strokes[i].displayPortion\n      });\n    }\n  }\n  this._oldProps = props;\n};\n\nmodule.exports = CharacterRenderer;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _require = __webpack_require__(0),\n    counter = _require.counter;\n\nvar svg = __webpack_require__(3);\n\nvar _require2 = __webpack_require__(2),\n    extendStart = _require2.extendStart,\n    getPathString = _require2.getPathString;\n\nvar StrokeRendererBase = __webpack_require__(6);\n\nvar STROKE_WIDTH = 200;\n\n// this is a stroke composed of several stroke parts\nfunction StrokeRenderer(stroke) {\n  this._oldProps = {};\n  this._stroke = stroke;\n  this._pathLength = stroke.getLength() + STROKE_WIDTH / 2;\n}\nStrokeRenderer.prototype = Object.create(StrokeRendererBase.prototype);\n\nStrokeRenderer.prototype.mount = function (target) {\n  this._animationPath = svg.createElm('path');\n  this._clip = svg.createElm('clipPath');\n  this._strokePath = svg.createElm('path');\n  var maskId = 'mask-' + counter();\n  svg.attr(this._clip, 'id', maskId);\n\n  svg.attr(this._strokePath, 'd', this._stroke.path);\n  this._animationPath.style.opacity = 0;\n  svg.attr(this._animationPath, 'clip-path', svg.urlIdRef(maskId));\n\n  var extendedMaskPoints = extendStart(this._stroke.points, STROKE_WIDTH / 2);\n  svg.attr(this._animationPath, 'd', getPathString(extendedMaskPoints));\n  svg.attrs(this._animationPath, {\n    stroke: '#FFFFFF',\n    'stroke-width': STROKE_WIDTH,\n    fill: 'none',\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'miter',\n    'stroke-dasharray': this._pathLength + ',' + this._pathLength\n  });\n\n  this._clip.appendChild(this._strokePath);\n  target.defs.appendChild(this._clip);\n  target.svg.appendChild(this._animationPath);\n  return this;\n};\n\nStrokeRenderer.prototype.render = function (props) {\n  if (props === this._oldProps) return;\n  if (props.displayPortion !== this._oldProps.displayPortion) {\n    this._animationPath.style.strokeDashoffset = this._getStrokeDashoffset(props.displayPortion);\n  }\n\n  var color = this._getColor(props);\n  if (color !== this._getColor(this._oldProps)) {\n    var r = color.r,\n        g = color.g,\n        b = color.b,\n        a = color.a;\n\n    svg.attrs(this._animationPath, { stroke: 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')' });\n  }\n\n  if (props.opacity !== this._oldProps.opacity) {\n    this._animationPath.style.opacity = props.opacity;\n  }\n  this._oldProps = props;\n};\n\nmodule.exports = StrokeRenderer;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar svg = __webpack_require__(3);\n\nvar _require = __webpack_require__(2),\n    getPathString = _require.getPathString;\n\nfunction UserStrokeRenderer() {\n  this._oldProps = {};\n}\n\nUserStrokeRenderer.prototype.mount = function (target) {\n  this._path = svg.createElm('path');\n  target.svg.appendChild(this._path);\n};\n\nUserStrokeRenderer.prototype.render = function (props) {\n  if (props === this._oldProps) return;\n  if (props.strokeColor !== this._oldProps.strokeColor || props.strokeWidth !== this._oldProps.strokeWidth) {\n    var _props$strokeColor = props.strokeColor,\n        r = _props$strokeColor.r,\n        g = _props$strokeColor.g,\n        b = _props$strokeColor.b,\n        a = _props$strokeColor.a;\n\n    svg.attrs(this._path, {\n      fill: 'none',\n      stroke: 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')',\n      'stroke-width': props.strokeWidth,\n      'stroke-linecap': 'round',\n      'stroke-linejoin': 'round'\n    });\n  }\n  if (props.opacity !== this._oldProps.opacity) {\n    svg.attr(this._path, 'opacity', props.opacity);\n  }\n  if (props.points !== this._oldProps.points) {\n    svg.attr(this._path, 'd', getPathString(props.points));\n  }\n  this._oldProps = props;\n};\n\nUserStrokeRenderer.prototype.destroy = function () {\n  svg.removeElm(this._path);\n};\n\nmodule.exports = UserStrokeRenderer;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nvar _require = __webpack_require__(3),\n    createElm = _require.createElm,\n    attrs = _require.attrs;\n\nvar RenderTargetBase = __webpack_require__(7);\n\nfunction RenderTarget(svg, defs) {\n  this.svg = svg;\n  this.defs = defs;\n  this.node = svg;\n\n  if (this.node.createSVGPoint) {\n    this._pt = this.node.createSVGPoint();\n  }\n}\nRenderTarget.prototype = Object.create(RenderTargetBase.prototype);\n\nRenderTarget.prototype.createSubRenderTarget = function () {\n  var group = createElm('g');\n  this.svg.appendChild(group);\n  return new RenderTarget(group, this.defs);\n};\n\nRenderTarget.prototype._getMousePoint = function (evt) {\n  if (this._pt) {\n    this._pt.x = evt.clientX;\n    this._pt.y = evt.clientY;\n    var localPt = this._pt.matrixTransform(this.node.getScreenCTM().inverse());\n    return { x: localPt.x, y: localPt.y };\n  }\n  return RenderTargetBase.prototype._getMousePoint.call(this, evt);\n};\n\nRenderTarget.prototype._getTouchPoint = function (evt) {\n  if (this._pt) {\n    this._pt.x = evt.touches[0].clientX;\n    this._pt.y = evt.touches[0].clientY;\n    var localPt = this._pt.matrixTransform(this.node.getScreenCTM().inverse());\n    return { x: localPt.x, y: localPt.y };\n  }\n  return RenderTargetBase.prototype._getTouchPoint.call(this, evt);\n};\n\nRenderTarget.init = function (elmOrId) {\n  var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '100%';\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '100%';\n\n  var svg = void 0;\n  var elm = elmOrId;\n  if (typeof elmOrId === 'string') {\n    elm = global.document.getElementById(elmOrId);\n  }\n  if (!elm) {\n    throw new Error('HanziWriter target element not found: ' + elmOrId);\n  }\n  var nodeType = elm.nodeName.toUpperCase();\n  if (nodeType === 'SVG' || nodeType === 'G') {\n    svg = elm;\n  } else {\n    svg = createElm('svg');\n    elm.appendChild(svg);\n  }\n  attrs(svg, { width: width, height: height });\n  var defs = createElm('defs');\n  svg.appendChild(defs);\n  return new RenderTarget(svg, defs);\n};\n\nmodule.exports = RenderTarget;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar HanziWriterRenderer = __webpack_require__(26);\nvar RenderTarget = __webpack_require__(30);\n\nmodule.exports = {\n  HanziWriterRenderer: HanziWriterRenderer,\n  createRenderTarget: RenderTarget.init\n};\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar CharacterRenderer = __webpack_require__(27);\nvar renderUserStroke = __webpack_require__(29);\n\nvar _require = __webpack_require__(0),\n    assign = _require.assign;\n\nfunction HanziWriterRenderer(character, positioner) {\n  this._character = character;\n  this._positioner = positioner;\n  this._mainCharRenderer = new CharacterRenderer(character);\n  this._outlineCharRenderer = new CharacterRenderer(character);\n  this._highlightCharRenderer = new CharacterRenderer(character);\n}\n\nHanziWriterRenderer.prototype.mount = function (target) {\n  this._target = target;\n};\n\nHanziWriterRenderer.prototype._animationFrame = function (func) {\n  var ctx = this._target.getContext();\n  ctx.clearRect(0, 0, this._positioner.width, this._positioner.height);\n\n  ctx.save();\n  ctx.translate(this._positioner.xOffset, this._positioner.height - this._positioner.yOffset);\n  ctx.transform(1, 0, 0, -1, 0, 0);\n  ctx.scale(this._positioner.scale, this._positioner.scale);\n  func(ctx);\n  ctx.restore();\n  if (ctx.draw) ctx.draw();\n};\n\nHanziWriterRenderer.prototype.render = function (props) {\n  var _this = this;\n\n  this._animationFrame(function (ctx) {\n    _this._outlineCharRenderer.render(ctx, {\n      opacity: props.character.outline.opacity,\n      strokes: props.character.outline.strokes,\n      strokeColor: props.options.outlineColor\n    });\n    _this._mainCharRenderer.render(ctx, {\n      opacity: props.character.main.opacity,\n      strokes: props.character.main.strokes,\n      strokeColor: props.options.strokeColor,\n      radicalColor: props.options.radicalColor\n    });\n    _this._highlightCharRenderer.render(ctx, {\n      opacity: props.character.highlight.opacity,\n      strokes: props.character.highlight.strokes,\n      strokeColor: props.options.highlightColor\n    });\n\n    var userStrokes = props.userStrokes || {};\n    Object.keys(userStrokes).forEach(function (userStrokeId) {\n      if (userStrokes[userStrokeId]) {\n        var userStrokeProps = assign({\n          strokeWidth: props.options.drawingWidth,\n          strokeColor: props.options.drawingColor\n        }, userStrokes[userStrokeId]);\n        renderUserStroke(ctx, userStrokeProps);\n      }\n    });\n  });\n};\n\nHanziWriterRenderer.prototype.destroy = function () {};\n\nmodule.exports = HanziWriterRenderer;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar StrokeRenderer = __webpack_require__(28);\n\nfunction CharacterRenderer(character) {\n  this._strokeRenderers = character.strokes.map(function (stroke) {\n    return new StrokeRenderer(stroke);\n  });\n}\n\nCharacterRenderer.prototype.render = function (ctx, props) {\n  if (props.opacity < 0.05) return;\n  for (var i = 0; i < this._strokeRenderers.length; i++) {\n    this._strokeRenderers[i].render(ctx, {\n      strokeColor: props.strokeColor,\n      radicalColor: props.radicalColor,\n      opacity: props.strokes[i].opacity * props.opacity,\n      displayPortion: props.strokes[i].displayPortion\n    });\n  }\n};\n\nmodule.exports = CharacterRenderer;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nvar _require = __webpack_require__(2),\n    extendStart = _require.extendStart;\n\nvar _require2 = __webpack_require__(8),\n    drawPath = _require2.drawPath,\n    pathStringToCanvas = _require2.pathStringToCanvas;\n\nvar StrokeRendererBase = __webpack_require__(6);\n\nvar STROKE_WIDTH = 200;\n\n// this is a stroke composed of several stroke parts\nfunction StrokeRenderer(stroke) {\n  var usePath2D = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n  this._stroke = stroke;\n  this._pathLength = stroke.getLength() + STROKE_WIDTH / 2;\n  if (usePath2D && global.Path2D) {\n    this._path2D = new global.Path2D(this._stroke.path);\n  } else {\n    this._pathCmd = pathStringToCanvas(this._stroke.path);\n  }\n  this._extendedMaskPoints = extendStart(this._stroke.points, STROKE_WIDTH / 2);\n}\nStrokeRenderer.prototype = Object.create(StrokeRendererBase.prototype);\n\nStrokeRenderer.prototype.render = function (ctx, props) {\n  if (props.opacity < 0.05) return;\n\n  ctx.save();\n  if (this._path2D) {\n    ctx.clip(this._path2D);\n  } else {\n    this._pathCmd(ctx);\n    // wechat bugs out if the clip path isn't stroked or filled\n    ctx.globalAlpha = 0;\n    ctx.stroke();\n    ctx.clip();\n  }\n\n  var _getColor = this._getColor(props),\n      r = _getColor.r,\n      g = _getColor.g,\n      b = _getColor.b,\n      a = _getColor.a;\n\n  var color = a === 1 ? 'rgb(' + r + ',' + g + ',' + b + ')' : 'rgb(' + r + ',' + g + ',' + b + ',' + a + ')';\n  var dashOffset = this._getStrokeDashoffset(props.displayPortion);\n  ctx.globalAlpha = props.opacity;\n  ctx.strokeStyle = color;\n  ctx.fillStyle = color;\n  ctx.lineWidth = STROKE_WIDTH;\n  ctx.lineCap = 'round';\n  ctx.lineJoin = 'round';\n  // wechat sets dashOffset as a second param here. Should be harmless for browsers to add here too\n  ctx.setLineDash([this._pathLength, this._pathLength], dashOffset);\n  ctx.lineDashOffset = dashOffset;\n  drawPath(ctx, this._extendedMaskPoints);\n\n  ctx.restore();\n};\n\nmodule.exports = StrokeRenderer;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _require = __webpack_require__(8),\n    drawPath = _require.drawPath;\n\nmodule.exports = function (ctx, props) {\n  if (props.opacity < 0.05) return;\n  var _props$strokeColor = props.strokeColor,\n      r = _props$strokeColor.r,\n      g = _props$strokeColor.g,\n      b = _props$strokeColor.b,\n      a = _props$strokeColor.a;\n\n\n  ctx.save();\n  ctx.globalAlpha = props.opacity;\n  ctx.lineWidth = props.strokeWidth;\n  ctx.strokeStyle = 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n  ctx.lineCap = 'round';\n  ctx.lineJoin = 'round';\n  drawPath(ctx, props.points);\n  ctx.restore();\n};\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nvar RenderTargetBase = __webpack_require__(7);\n\nfunction RenderTarget(canvas) {\n  this.node = canvas;\n}\nRenderTarget.prototype = Object.create(RenderTargetBase.prototype);\n\nRenderTarget.prototype.getContext = function () {\n  return this.node.getContext('2d');\n};\n\nRenderTarget.init = function (elmOrId) {\n  var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '100%';\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '100%';\n\n  var canvas = void 0;\n  var elm = elmOrId;\n  if (typeof elmOrId === 'string') {\n    elm = global.document.getElementById(elmOrId);\n  }\n  if (!elm) {\n    throw new Error('HanziWriter target element not found: ' + elmOrId);\n  }\n  var nodeType = elm.nodeName.toUpperCase();\n  if (nodeType === 'CANVAS') {\n    canvas = elm;\n  } else {\n    canvas = global.document.createElement('canvas');\n    elm.appendChild(canvas);\n  }\n  canvas.setAttribute('width', width);\n  canvas.setAttribute('height', height);\n  return new RenderTarget(canvas);\n};\n\nmodule.exports = RenderTarget;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nvar VERSION = '2.0';\nvar getCharDataUrl = function getCharDataUrl(char) {\n  return 'https://cdn.jsdelivr.net/npm/hanzi-writer-data@' + VERSION + '/' + char + '.json';\n};\n\nmodule.exports = function (char, onLoad, onError) {\n  // load char data from hanziwriter cdn (currently hosted on jsdelivr)\n  var xhr = new global.XMLHttpRequest();\n  if (xhr.overrideMimeType) {\n    // IE 9 and 10 don't seem to support this...\n    xhr.overrideMimeType('application/json');\n  }\n  xhr.open('GET', getCharDataUrl(char), true);\n  xhr.onerror = function (event) {\n    onError(xhr, event);\n  };\n  xhr.onreadystatechange = function () {\n    // TODO: error handling\n    if (xhr.readyState !== 4) return;\n\n    if (xhr.status === 200) {\n      onLoad(JSON.parse(xhr.responseText));\n    } else if (xhr.status !== 0 && onError) {\n      onError(xhr);\n    }\n  };\n  xhr.send(null);\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _require = __webpack_require__(0),\n    callIfExists = _require.callIfExists;\n\nfunction LoadingManager(options) {\n  this._loadCounter = 0;\n  this._options = options;\n  this._isLoading = false;\n\n  // use this to attribute to determine if there was a problem with loading\n  this.loadingFailed = false;\n}\n\nLoadingManager.prototype._debouncedLoad = function (char, count) {\n  var _this = this;\n\n  // these wrappers ignore all responses except the most recent.\n  var wrappedResolve = function wrappedResolve(data) {\n    if (count === _this._loadCounter) _this._resolve(data);\n  };\n  var wrappedReject = function wrappedReject(reason) {\n    if (count === _this._loadCounter) _this._reject(reason);\n  };\n\n  var returnedData = this._options.charDataLoader(char, wrappedResolve, wrappedReject);\n  if (returnedData) wrappedResolve(returnedData);\n};\n\nLoadingManager.prototype._setupLoadingPromise = function () {\n  var _this2 = this;\n\n  return new Promise(function (resolve, reject) {\n    _this2._resolve = resolve;\n    _this2._reject = reject;\n  }).then(function (data) {\n    _this2._isLoading = false;\n    callIfExists(_this2._options.onLoadCharDataSuccess, data);\n    return data;\n  }, function (reason) {\n    _this2._isLoading = false;\n    _this2.loadingFailed = true;\n    callIfExists(_this2._options.onLoadCharDataError, reason);\n    // If error callback wasn't provided, throw an error so the developer will be aware something went wrong\n    if (!_this2._options.onLoadCharDataError) {\n      if (reason instanceof Error) throw reason;\n      var err = new Error('Failed to load char data for ' + _this2._loadingChar);\n      err.reason = reason;\n      throw err;\n    }\n  });\n};\n\nLoadingManager.prototype.loadCharData = function (char) {\n  this._loadingChar = char;\n  var promise = this._setupLoadingPromise();\n  this.loadingFailed = false;\n  this._isLoading = true;\n  this._loadCounter++;\n  this._debouncedLoad(char, this._loadCounter);\n  return promise;\n};\n\nmodule.exports = LoadingManager;\n\n/***/ })\n/******/ ]);\n});"],"sourceRoot":""}