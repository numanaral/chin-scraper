{"version":3,"sources":["components/ResponsiveCenteredContainer/ResponsiveCenteredContainer.js","components/SearchForm/types.js","components/PaperContainerWithSpacing/PaperContainerWithSpacing.js","components/SearchForm/Notes.js","components/SearchForm/SearchForm.js","components/TranslationResult/TranslationResult.js","components/TranslationResult/types.js","api/translateApi.js","containers/Learn/utils.js","containers/Learn/CardGrid/Lazy.js","containers/Learn/Body.js","containers/Learn/Learn.js","routes/pages/Learn.js","components/ContainerWithCenteredItems/types.js","components/ContainerWithCenteredItems/ContainerWithCenteredItems.js","components/Spacer/StyledWrapper.js","components/Spacer/Spacer.js","components/Spacer/types.js","utils/index.js","store/firebase/hooks/useSearchQueries.js","utils/chinese.js","api/rest.js","utils/speech.js","../node_modules/@material-ui/core/esm/Divider/Divider.js","hooks/usePrevious.js"],"names":["Wrapper","styled","div","CenteredContainer","theme","breakpoints","up","ResponsiveCenteredContainer","props","string","func","isRequired","bool","PaperWrapper","Paper","spacing","palette","background","level1","PaperContainerWithSpacing","useState","isHovering","setIsHovering","ContainerWithCenteredItems","elevation","onMouseEnter","onMouseLeave","Box","py","px","textAlign","defaultProps","Caption","Typography","variant","PrimaryCaption","color","SecondaryCaption","GreenCaption","success","main","RECOGNIZED_CHARACTER_TYPES","CHAR_TYPE_LENGTH","length","Notes","useLocalStorage","notesAreDismissed","setNotesAreDismissed","horizontal","width","Divider","component","map","type","ind","TooltipButton","tooltip","text","onClick","icon","CloseIcon","SearchForm","input","onSubmit","onChange","loading","TextField","fullWidth","autoFocus","label","placeholder","value","name","InputProps","startAdornment","InputAdornment","position","speak","disabled","SpeakIcon","endAdornment","SearchIcon","Spacer","direction","TranslationResult","original","translation","pinyin","TRANSLATE_ROUTE","translate","params","from","to","extended","parse","server","get","getWordListAndSentenceFromTranslation","maskedWord","group","toLowerCase","split","s","trim","sentence","firstCapital","wordList","slice","generateCards","hanziList","translationList","pinyinList","Array","fill","_","id","hanzi","fetchAndParseTranslationResult","currentChars","a","hanziGroup","stripNonChineseChars","res","translationGroup","transcription","pinyinGroup","cards","loadable","Body","Grid","smAndDown","useMediaQuery","t","down","bottomNavbarDiff","footerDiff","Learn","push","useHistory","pending","setPending","setInput","sentences","setSentences","setCards","previousInput","usePrevious","add","useSearchQueries","resetCards","e","preventDefault","BASE_PATH","previousChineseInputWithPunctuation","stripNonChineseAndNonSetPunctionationChars","chineseInputWithPunctuation","chineseInput","resultCards","console","error","message","useEffect","target","Lazy","fallback","LoadingIndicator","traceId","node","StyledGrid","$horizontal","$vertical","children","vertical","rest","StyledWrapper","span","$direction","$spacing","numberOrString","parseInt","toUpperCase","pascalToSentence","str","replace","noop","useIsAnalyticsEnabled","analyticsIsEnabled","ref","useFirestore","collection","useFirestoreCollectionData","orderBy","query","createdOn","Date","REGEX_STRIP_NON_CHINESE_CHARS","REGEX_STRIP_NON_CHINESE_AND_NON_SET_PUNCTUATION_CHARS","TONE_MAP","ā","á","ǎ","à","ō","ó","ǒ","ò","ē","é","ě","è","ī","í","ǐ","ì","ū","ú","ǔ","ù","ü","ǖ","ǘ","ǚ","ǜ","ń","ň","removeTones","match","post","url","body","instance","axios","put","remove","delete","data","serverInstance","create","baseURL","process","HAN_TRAINER_PRO_PREFIX","HAN_TRAINER_PRO_POSTFIX","synth","utterance","window","speechSynthesis","SpeechSynthesisUtterance","pitch","rate","PINYIN_JS_URL","PINYIN_JS_DICTIONARY_URL","markToNumberForHanTrainerPro","speaking","cancel","voice","getVoices","find","v","lang","alert","importPinyinJsIfNeeded","pinyin_dict_withtone","headers","accept","pinyinUtil","eval","trySpeakNative","_pinyin","getPinyin","numberedPinyin","audioUrl","audio","Audio","play","warn","React","_props$absolute","absolute","classes","className","_props$component","Component","_props$flexItem","flexItem","_props$light","light","_props$orientation","orientation","_props$role","role","undefined","_props$variant","other","_objectWithoutProperties","_extends","clsx","root","withStyles","height","margin","border","flexShrink","backgroundColor","divider","bottom","left","inset","marginLeft","fade","middle","marginRight","alignSelf","useRef","current"],"mappings":"ydAGA,IAAMA,EAAUC,IAAOC,IAAV,KAIPC,EAAoBF,IAAOC,IAAV,KAGpB,gBAAGE,EAAH,EAAGA,MAAH,sBACCA,EAAMC,YAAYC,GAAG,MADtB,6CAICF,EAAMC,YAAYC,GAAG,MAJtB,6CAOCF,EAAMC,YAAYC,GAAG,MAPtB,uCAmBYC,EANqB,SAAAC,GAAK,OACxC,cAACR,EAAD,UACC,cAACG,EAAD,eAAuBK,O,mBCtBjBC,SACGC,OAAKC,WACLD,OAAKC,WACNC,O,sKCAV,IAAMC,EAAeZ,YAAOa,IAAPb,CAAH,KAGf,gBAAGG,EAAH,EAAGA,MAAH,qCACgBA,EAAMW,QAAQ,GAD9B,sCAEmBX,EAAMY,QAAQC,WAAWC,OAF5C,YAMGC,EAA4B,SAAAX,GAAU,IAAD,EACNY,oBAAS,GADH,mBACnCC,EADmC,KACvBC,EADuB,KAK1C,OACC,cAACC,EAAA,EAAD,UACC,cAACV,EAAD,CACCW,UAAYH,EAAc,EAAM,EAChCI,aAPa,kBAAMH,GAAc,IAQjCI,aAPa,kBAAMJ,GAAc,IAIlC,SAKC,cAACK,EAAA,EAAD,aAAKC,GAAI,EAAGC,GAAI,EAAGC,UAAU,QAAWtB,SAO5CW,EAA0BY,aAAe,GAE1BZ,Q,8EC1Bf,IAAMa,EAAU,SAAAxB,GAAK,OAAI,cAACyB,EAAA,EAAD,aAAYC,QAAQ,WAAc1B,KAErD2B,EAAiB,SAAA3B,GAAK,OAAI,cAAC,EAAD,aAAS4B,MAAM,WAAc5B,KAEvD6B,EAAmB,SAAA7B,GAAK,OAAI,cAAC,EAAD,aAAS4B,MAAM,aAAgB5B,KAE3D8B,EAAerC,YAAO+B,EAAP/B,CAAH,KACf,gBAAGG,EAAH,EAAGA,MAAH,6BACQA,EAAMY,QAAQuB,QAAQC,KAD9B,YAKGC,EAA6B,CAClC,QACA,QACA,MACA,mBACA,iBAEKC,EAAmBD,EAA2BE,OAgDrCC,EA9CD,WAAO,IAAD,EAC+BC,YAFL,qBAI5C,GAHkB,mBACZC,EADY,KACOC,EADP,KAKnB,OACED,GACA,cAACvB,EAAA,EAAD,CAA4ByB,YAAU,EAAtC,SACC,eAAC,EAAD,CAA2BC,MAAM,OAAjC,UACC,cAAC1B,EAAA,EAAD,CAA4ByB,YAAU,EAAtC,SACC,cAAC,EAAD,wBAED,cAACE,EAAA,EAAD,IAEA,+BACC,eAAC,EAAD,CAASC,UAAU,KAAnB,+CAEEV,EAA2BW,KAAI,SAACC,EAAMC,GAAP,OAC/B,qCACC,cAAC,EAAD,UAA8BD,GAAPA,IACtBC,EAAMZ,EAAmB,EAAzB,KAAsCY,EAAMZ,EAAmB,GAAK,WAAY,aAIpF,eAAC,EAAD,CAASS,UAAU,KAAnB,UACC,cAACb,EAAD,0BADD,iCAGO,cAACA,EAAD,sBAHP,uCAQD,cAACf,EAAA,EAAD,UACC,cAACgC,EAAA,EAAD,CACCC,QAAQ,gBACRC,KAAK,gBACLC,QAAS,kBAAMX,GAAqB,IACpCY,KAAMC,cCzDPC,EAAa,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,SAAUC,EAApB,EAAoBA,SAAUC,EAA9B,EAA8BA,QAA9B,OAClB,cAAC,EAAD,UACC,uBAAMF,SAAUA,EAAhB,UACC,cAACG,EAAA,EAAD,CACCC,WAAS,EACTC,WAAS,EACTC,MAAM,sBACNnC,QAAQ,WACRmB,KAAK,SACLiB,YAAY,eACZC,MAAOT,EACPU,KAAK,oBACLR,SAAUA,EACVS,WAAY,CACXC,eACC,cAACC,EAAA,EAAD,CAAgBC,SAAS,QAAzB,SACC,cAACrB,EAAA,EAAD,CACCC,QAAQ,QACRE,QAAS,kBAAMmB,YAAMf,IACrBgB,UAAWhB,EACXH,KAAMoB,QAITC,aACC,cAACL,EAAA,EAAD,CAAgBC,SAAS,QAAzB,SACC,cAACrB,EAAA,EAAD,CACCC,QAAQ,SACRsB,UAAWhB,EACXG,QAASA,EACT7B,MAAM,UACNuB,KAAMsB,IACN5B,KAAK,gBAMV,cAAC6B,EAAA,EAAD,CAAQC,UAAU,SAASpE,QAAQ,MACnC,cAAC,EAAD,UAMH8C,EAAW9B,aH/CU,CACpBtB,OAAQ,GACRwD,SAAS,GG+CKJ,QClDTuB,GCLQ3E,SACLA,SDIiB,SAAC,GAAD,IAAG4E,EAAH,EAAGA,SAAUC,EAAb,EAAaA,YAAaC,EAA1B,EAA0BA,OAA1B,OACzB,cAAC,EAAD,UACC,cAAChE,EAAA,EAAD,UACC,eAAC,EAAD,CAA2BO,UAAU,SAArC,UACC,eAACG,EAAA,EAAD,eAAcoD,EAAd,OACA,eAACpD,EAAA,EAAD,eAAcsD,EAAd,OACA,eAACtD,EAAA,EAAD,eAAcqD,EAAd,gBAOJF,EAAkBrD,aCfG,CACpBuD,YAAa,GACbC,OAAQ,IDeMH,Q,0BErBTI,GAAkB,YAWTC,GATG,SACjBhC,GADiB,IAEjBiC,EAFiB,uDAER,CACRC,KAAM,QACNC,GAAI,KACJC,UAAU,GALM,OAObC,YAAMC,IAAOC,IAAIR,GAAX,2BAAiCE,GAAjC,IAAyCjC,YCL9CwC,GAAwC,SAAAC,GAC7C,IAAMC,EAAqBD,EAAWE,cAHXC,MAAM,KAAKjD,KAAI,SAAAkD,GAAC,OAAIA,EAAEC,UAMjD,MAAO,CACNC,SAHgBC,YAAaN,EAAM,IAInCO,SAHgBP,EAAMQ,MAAM,KAOxBC,GAAgB,SAACC,EAAWC,EAAiBC,GAA7B,OACrBC,MAAMH,EAAUlE,QACdsE,KAAK,GACL7D,KAAI,SAAC8D,EAAG5D,GAAJ,MAAa,CACjBG,KAAMoD,EAAUvD,GAChB6D,GAAI7D,EAAMuD,EAAUvD,GACpB8D,MAAOP,EAAUvD,GACjBgC,YAAawB,EAAgBxD,GAC7BiC,OAAQwB,EAAWzD,QAGhB+D,GAA8B,uCAAG,WAAMC,GAAN,6BAAAC,EAAA,6DAChCC,EAAaC,YAAqBH,GAAcjB,MAAM,IADtB,SAEpBZ,GAAU6B,GAFU,cAEhCI,EAFgC,SAMlCzB,GAAsCyB,EAAIpC,aAFnCA,EAJ2B,EAIrCkB,SACUmB,EAL2B,EAKrCjB,SALqC,EAUlCT,GAAsCyB,EAAIE,eAFnCrC,EAR2B,EAQrCiB,SACUqB,EAT2B,EASrCnB,SATqC,kBAY/B,CACNpB,cACAC,SACAuC,MAAOlB,GAAcY,EAAYG,EAAkBE,KAfd,2CAAH,sD,SCzBrBE,iBAAS,kBAAM,gE,8JCC9B,IAuBeC,GAvBF/H,YAAOgI,KAAPhI,CAAH,MACP,YAAgB,IAAbG,EAAY,EAAZA,MACE8H,EAAYC,cAAc,SAAAC,GAAC,OAAIA,EAAE/H,YAAYgI,KAAK,SAIlDC,EAAoBJ,EAAa,UAAc,GAE/CK,EAAeL,EAA2B,GAAd,UAElC,MAAM,+GAAN,OANsB,QAMtB,OAGwCI,GAHxC,OAG2DC,EAH3D,oCAKWnI,EAAMW,QAAQ,EAAG,EAAImH,EAAa,GAAO,GALpD,YC0GaM,GArGD,WAAO,IACZC,EAASC,cAATD,KADW,EAEWrH,oBAAS,GAFpB,mBAEZuH,EAFY,KAEHC,EAFG,OAGOxH,mBAAS,IAHhB,mBAGZ0C,EAHY,KAGL+E,EAHK,OAIezH,mBAAS,IAJxB,mBAIZ0H,EAJY,KAIDC,EAJC,OAKO3H,mBAAS,IALhB,mBAKZ0G,EALY,KAKLkB,EALK,KAMbC,EAAgBC,YAAYpF,GAC1BqF,EAAQC,cAARD,IAEFE,EAAa,WAClBL,EAAS,IACTD,EAAa,KASRhF,EAAQ,uCAAG,WAAMuF,GAAN,2BAAA/B,EAAA,yDAChB+B,EAAEC,iBAGY,kBAAVzF,GACH2E,EAAK,GAAD,OAAIe,IAAJ,kBAICC,EAAsCC,YAC3CT,GAGKU,EAA8BD,YACnC5F,GAMA2F,IAAwCE,EApBzB,uBAuBX7F,IAAU6F,GACbd,EAASc,GAxBK,+BA6BVC,EAAenC,YAAqBkC,IA7B1B,wBAgCff,GAAW,GAhCI,UAkCdO,EAAIS,GACJf,EAASc,GAnCK,UAwCJtC,GACTsC,GAzCa,iBAqCbrE,EArCa,EAqCbA,YACAC,EAtCa,EAsCbA,OACOsE,EAvCM,EAuCb/B,MAKDiB,EAAa,CACZ1D,SAAUsE,EACVrE,cACAC,WAEDyD,EAASa,GAjDK,mDAmDdC,QAAQC,MAAM,KAAIC,SAnDJ,yBAqDdpB,GAAW,GArDG,uDA0DZd,EAAMnF,QAAQ0G,IAClBR,EAAS,IA3DO,iEAAH,sDAgEd,OAFAoB,qBAAU,cAAU,CAACnG,IAGpB,cAAC,GAAD,UACC,eAACvC,EAAA,EAAD,WACC,cAAC,EAAD,CACCuC,MAAOA,EACPE,SA3Ea,SAAAsF,GAAM,IACd/E,EAAU+E,EAAEY,OAAZ3F,MACRsE,EAAStE,IACJA,GAASuD,EAAMnF,QAAQ0G,KAyEzBtF,SAAUA,EACVE,QAAS0E,IAETG,EAAUxD,aAAe,cAAC,EAAD,eAAuBwD,IACjD,cAAC5D,EAAA,EAAD,CAAQC,UAAU,SAASpE,QAAS,MACpC,cAACoJ,GAAD,CAAcrC,MAAOA,U,SCrGVU,UAND,kBACb,cAAC,IAAD,CAAkB4B,SAAU,cAACC,GAAA,EAAD,IAAsBC,QAAQ,aAA1D,SACC,cAAC,GAAD,Q,oICLSC,OAAK5J,WACHC,OACFA,O,oICCX,IAAM4J,EAAavK,YAAOgI,IAAPhI,CAAH,KAIb,gBAAGwK,EAAH,EAAGA,YAAaC,EAAhB,EAAgBA,UAAhB,sBACCD,GAAe,2BADhB,iBAECC,GAAa,qCAFd,WAYGnJ,EAA6B,SAAC,GAAD,IAClCoJ,EADkC,EAClCA,SACA3H,EAFkC,EAElCA,WACA4H,EAHkC,EAGlCA,SACGC,EAJ+B,2DAMlC,cAACL,EAAD,yBAAYC,YAAazH,EAAY0H,UAAWE,GAAcC,GAA9D,aACEF,MAKHpJ,EAA2BQ,aD1BN,CACpBiB,YAAY,EACZ4H,UAAU,GC0BIrJ,S,8MClCf,IAQeuJ,E,MARO7K,EAAO8K,KAAV,KAGhB,gBAAG3K,EAAH,EAAGA,MAAO4K,EAAV,EAAUA,WAAYC,EAAtB,EAAsBA,SAAtB,6BACQD,EADR,aACuB5K,EAAMW,QAAQkK,GADrC,c,QCWG/F,GCVMC,IAAUxE,WAKZuK,IDKK,SAAC,GAAD,IAAG/F,EAAH,EAAGA,UAAWpE,EAAd,EAAcA,QAAd,OACd,cAAC,EAAD,CACCiK,WAAY7F,EACZ8F,SACqB,kBAAZlK,GAAwBoK,SAASpK,EAAS,KAAQA,MAM7DmE,EAAOnD,aCbc,CACpBhB,QAAS,GDcKmE,S,iCE5Bf,0GAAMuB,EAAe,SAAAH,GAAC,OAAKA,GAAKA,EAAE,GAAG8E,cAAgB9E,EAAEK,MAAM,IAAO,IAG9D0E,EAAmB,SAAAC,GAAG,OAC3BA,EAEEC,QAAQ,wBAAyB,UAEjCA,QAAQ,oBAAqB,SAE7BA,QAAQ,kBAAmB,SAC3BA,QAAQ,MAAM,SAAAjF,GAAC,OAAIA,EAAE8E,iBAErB7E,QAEGiF,EAAO,kBAAM,O,6DCMJpC,IAjBU,WAAO,IAAD,EACDqC,cAAtBC,EADuB,oBAExBC,EAAMC,cAAeC,WAAW,iBAYtC,MAAO,CAAEA,WAXUC,YAA2BH,EAAII,QAAQ,cAWrC5C,IATT,SAAA6C,GACNN,GAELC,EAAIxC,IAAI,CACP6C,QACAC,UAAW,IAAIC,W,iCCdlB,0GAEMC,EAAgC,4cAChCC,EAAwD,gfAGxDC,EAAW,CAChBC,SAAG,IACHC,OAAG,IACHC,SAAG,IACHC,OAAG,IACHC,SAAG,IACHC,OAAG,IACHC,SAAG,IACHC,OAAG,IACHC,SAAG,IACHC,OAAG,IACHC,SAAG,IACHC,OAAG,IACHC,SAAG,IACHC,OAAG,IACHC,SAAG,IACHC,OAAG,IACHC,SAAG,IACHC,OAAG,IACHC,SAAG,IACHC,OAAG,IACHC,OAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACH,SAAK,KAIAvG,EAAuB,SAAAhE,GAAI,OAChCA,EAAK8H,QAAQY,EAA+B,KACvCzC,EAA6C,SAAAjG,GAAI,OACtDA,EAAK8H,QAAQa,EAAuD,KAC/D6B,EAAc,SAAA1I,GAAM,OACzBA,EAAOgG,QAAQ,yJAAmC,SAAA2C,GAAK,OAAI7B,EAAS6B,Q,sLCzC/DC,EAAO,SAACC,GAAD,IAAMC,EAAN,uDAAa,GAAIC,EAAjB,uDAA4BC,IAA5B,OAAsCD,EAASH,KAAKC,EAAKC,IAEhErI,EAAM,SAACoI,GAAwC,IAAnC1I,EAAkC,uDAAzB,GAAI4I,EAAqB,uDAAVC,IACzC,OAAOD,EAAStI,IAAIoI,EAAK,CACxB1I,YAII8I,EAAM,SAACJ,EAAKC,GAAN,IAAYC,EAAZ,uDAAuBC,IAAvB,OAAiCD,EAASE,IAAIJ,EAAKC,IAEzDI,EAAS,SAACL,GAAD,IAAME,EAAN,uDAAiBC,IAAjB,OAA2BD,EAASI,OAAON,IAGpDtI,EAAK,uCAAG,WAAM4B,GAAN,iBAAAH,EAAA,sEACUG,EADV,uBACLiH,EADK,EACLA,KADK,kBAENA,GAFM,2CAAH,sDAMLC,EAAiBL,IAAMM,OAAO,CACnCC,QAASC,+BAGJhJ,EAAS,CACdoI,KAAM,sCAAI3N,EAAJ,yBAAIA,EAAJ,uBAAc2N,EAAI,WAAJ,EAAQ3N,EAAR,QAAeoO,MACnC5I,IAAK,sCAAIxF,EAAJ,yBAAIA,EAAJ,uBAAcwF,EAAG,WAAH,EAAOxF,EAAP,QAAcoO,MACjCJ,IAAK,sCAAIhO,EAAJ,yBAAIA,EAAJ,uBAAcgO,EAAG,WAAH,EAAOhO,EAAP,QAAcoO,MACjCF,OAAQ,sCAAIlO,EAAJ,yBAAIA,EAAJ,uBAAciO,EAAM,WAAN,EAAUjO,EAAV,QAAiBoO,Q,05BCxBlCvC,SAAW,CAChBC,SAAG,KACHC,OAAG,KACHC,SAAG,KACHC,OAAG,KACHC,SAAG,KACHC,OAAG,KACHC,SAAG,KACHC,OAAG,KACHC,SAAG,KACHC,OAAG,KACHC,SAAG,KACHC,OAAG,KACHC,SAAG,KACHC,OAAG,KACHC,SAAG,KACHC,OAAG,KACHC,SAAG,KACHC,OAAG,KACHC,SAAG,KACHC,OAAG,KACHC,OAAG,KACHC,SAAG,KACHC,SAAG,KACHC,SAAG,KACHC,SAAG,KACHC,SAAG,KACHC,SAAG,KACH,SAAK,MAGAgB,uBAAsB,yDACtBC,wBAA0B,OAG5BC,MACAC,WACAC,OAAOC,iBAAmBD,OAAOE,4BACpCJ,MAAQE,OAAOC,gBACfF,UAAY,IAAIG,yBAChBH,UAAUI,MAAQ,EAClBJ,UAAUK,KAAO,IAGlB,IAAMC,cAAa,0DACbC,yBAAwB,yEAqBxBC,6BAA+B,SAAApK,GAAM,OAC1CA,EAAOgG,QAAQ,yJAAmC,SAAA2C,GAAK,OAAI7B,SAAS6B,OAO/DrJ,MAAQ,SAAApB,GACRA,IACAyL,OAAUC,WAOXD,MAAMU,UAAUV,MAAMW,SAGrBV,UAAUW,QACdX,UAAUW,MAAQZ,MAAMa,YAAYC,MAAK,SAAAC,GAAC,MAAe,UAAXA,EAAEC,SAEjDf,UAAU1L,KAAOA,EACjByL,MAAMrK,MAAMsK,YAZXgB,MAAM,6FAoBFC,uBAAsB,uUAAG,4MAAA7I,EAAA,uFACzB6H,OAAOiB,qBADkB,8CAENrK,gDAAI0J,yBAA0B,CACpDY,QAAS,CACRC,OAAQ,aAJmB,gCAErB5B,KAFqB,WAErBA,KAKRS,OAAOiB,qBAAuB1B,KAAKpD,QAClC,mCACA,IAT4B,UAYzB6D,OAAOoB,WAZkB,+CAcNxK,gDAAIyJ,cAAe,CACzCa,QAAS,CACRC,OAAQ,aAhBmB,iCAcrB5B,MAdqB,YAcrBA,KAOR8B,KAAK9B,OArBwB,yDAAH,wDAgCtB+B,eAAc,oUAAG,WAAOtJ,GAAP,6KAAAG,EAAA,yDAAchC,EAAd,+BAAuB,GACxC6B,EADiB,oDAMlBuJ,EAAUpL,EANQ,gCAQf6K,yBARe,OASrBO,EAAUvB,OAAOoB,WAAWI,UAAUxJ,GATjB,cAWhByJ,EAAiBlB,6BAA6BgB,GAC9CG,EACL9B,uBAAyB6B,EAAiB5B,wBAbrB,UAef8B,EAAQ,IAAIC,MAAMF,GAfH,UAgBfC,EAAME,OAhBS,2DAkBrBnH,QAAQoH,KAAR,oFAEC,CACC3L,OAAQoL,EACRvJ,QACAyJ,iBACAC,aAGFjM,MAAMuC,GA3Be,2DAAH,uD,iCCvIpB,sDAwDIlE,EAAuBiO,cAAiB,SAAiB3Q,EAAOmL,GAClE,IAAIyF,EAAkB5Q,EAAM6Q,SACxBA,OAA+B,IAApBD,GAAqCA,EAChDE,EAAU9Q,EAAM8Q,QAChBC,EAAY/Q,EAAM+Q,UAClBC,EAAmBhR,EAAM2C,UACzBsO,OAAiC,IAArBD,EAA8B,KAAOA,EACjDE,EAAkBlR,EAAMmR,SACxBA,OAA+B,IAApBD,GAAqCA,EAChDE,EAAepR,EAAMqR,MACrBA,OAAyB,IAAjBD,GAAkCA,EAC1CE,EAAqBtR,EAAMuR,YAC3BA,OAAqC,IAAvBD,EAAgC,aAAeA,EAC7DE,EAAcxR,EAAMyR,KACpBA,OAAuB,IAAhBD,EAAuC,OAAdP,EAAqB,iBAAcS,EAAYF,EAC/EG,EAAiB3R,EAAM0B,QACvBA,OAA6B,IAAnBiQ,EAA4B,YAAcA,EACpDC,EAAQC,YAAyB7R,EAAO,CAAC,WAAY,UAAW,YAAa,YAAa,WAAY,QAAS,cAAe,OAAQ,YAE1I,OAAoB2Q,gBAAoBM,EAAWa,YAAS,CAC1Df,UAAWgB,YAAKjB,EAAQkB,KAAMjB,EAAuB,cAAZrP,GAA2BoP,EAAQpP,GAAUmP,GAAYC,EAAQD,SAAUM,GAAYL,EAAQK,SAAUE,GAASP,EAAQO,MAAuB,aAAhBE,GAA8BT,EAAQ1G,UAChNqH,KAAMA,EACNtG,IAAKA,GACJyG,OA+DUK,iBAvIK,SAAgBrS,GAClC,MAAO,CAELoS,KAAM,CACJE,OAAQ,EACRC,OAAQ,EAERC,OAAQ,OACRC,WAAY,EACZC,gBAAiB1S,EAAMY,QAAQ+R,SAIjC1B,SAAU,CACRzM,SAAU,WACVoO,OAAQ,EACRC,KAAM,EACNhQ,MAAO,QAITiQ,MAAO,CACLC,WAAY,IAIdtB,MAAO,CACLiB,gBAAiBM,YAAKhT,EAAMY,QAAQ+R,QAAS,MAI/CM,OAAQ,CACNF,WAAY/S,EAAMW,QAAQ,GAC1BuS,YAAalT,EAAMW,QAAQ,IAI7B6J,SAAU,CACR8H,OAAQ,OACRzP,MAAO,GAIT0O,SAAU,CACR4B,UAAW,UACXb,OAAQ,WA0FoB,CAChClO,KAAM,cADOiO,CAEZvP,I,iCChJH,WAiBegG,IAdK,SAAA3E,GAGnB,IAAMoH,EAAM6H,mBAQZ,OALAvJ,qBAAU,WACT0B,EAAI8H,QAAUlP,IACZ,CAACA,IAGGoH,EAAI8H","file":"static/js/13.2d01ddbe.chunk.js","sourcesContent":["import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Wrapper = styled.div`\r\n\twidth: 100%;\r\n`;\r\n\r\nconst CenteredContainer = styled.div`\r\n\tmargin: auto;\r\n\twidth: 90%;\r\n\t${({ theme }) => `\r\n\t\t${theme.breakpoints.up('sm')} {\r\n\t\t\twidth: 70%;\r\n\t\t}\r\n\t\t${theme.breakpoints.up('md')} {\r\n\t\t\twidth: 50%;\r\n\t\t}\r\n\t\t${theme.breakpoints.up('lg')} {\r\n\t\t\twidth: 50%;\r\n\t\t}\r\n\t`}\r\n`;\r\n\r\nconst ResponsiveCenteredContainer = props => (\r\n\t<Wrapper>\r\n\t\t<CenteredContainer {...props} />\r\n\t</Wrapper>\r\n);\r\n\r\nexport default ResponsiveCenteredContainer;\r\n","import { string, func, bool } from 'prop-types';\r\n\r\nconst propTypes = {\r\n\tinput: string,\r\n\tonSubmit: func.isRequired,\r\n\tonChange: func.isRequired,\r\n\tloading: bool,\r\n};\r\n\r\nconst defaultProps = {\r\n\tstring: '',\r\n\tloading: false,\r\n};\r\n\r\nexport { propTypes, defaultProps };\r\n","import React, { useState } from 'react';\r\nimport { Box, Paper } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nimport ContainerWithCenteredItems from 'components/ContainerWithCenteredItems';\r\n\r\nconst PaperWrapper = styled(Paper)`\r\n\twidth: 100%;\r\n\ttext-align: left;\r\n\t${({ theme }) => `\r\n\t\tmargin-bottom: ${theme.spacing(2)}px;\r\n\t\tbackground-color: ${theme.palette.background.level1};\r\n\t`}\r\n`;\r\n\r\nconst PaperContainerWithSpacing = props => {\r\n\tconst [isHovering, setIsHovering] = useState(false);\r\n\tconst onEnter = () => setIsHovering(true);\r\n\tconst onLeave = () => setIsHovering(false);\r\n\r\n\treturn (\r\n\t\t<ContainerWithCenteredItems>\r\n\t\t\t<PaperWrapper\r\n\t\t\t\televation={(isHovering && 3) || 0}\r\n\t\t\t\tonMouseEnter={onEnter}\r\n\t\t\t\tonMouseLeave={onLeave}\r\n\t\t\t>\r\n\t\t\t\t<Box py={2} px={4} textAlign=\"left\" {...props} />\r\n\t\t\t</PaperWrapper>\r\n\t\t</ContainerWithCenteredItems>\r\n\t);\r\n};\r\n\r\nPaperContainerWithSpacing.propTypes = {};\r\nPaperContainerWithSpacing.defaultProps = {};\r\n\r\nexport default PaperContainerWithSpacing;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { Divider, Typography } from '@material-ui/core';\r\n\r\nimport useLocalStorage from 'hooks/useLocalStorage';\r\nimport TooltipButton from 'components/TooltipButton';\r\nimport { CloseIcon } from 'icons';\r\nimport ContainerWithCenteredItems from 'components/ContainerWithCenteredItems';\r\nimport PaperContainerWithSpacing from 'components/PaperContainerWithSpacing';\r\n\r\nconst Caption = props => <Typography variant=\"caption\" {...props} />;\r\n\r\nconst PrimaryCaption = props => <Caption color=\"primary\" {...props} />;\r\n\r\nconst SecondaryCaption = props => <Caption color=\"secondary\" {...props} />;\r\n\r\nconst GreenCaption = styled(Caption)`\r\n\t${({ theme }) => `\r\n\t\tcolor: ${theme.palette.success.main};\r\n\t`}\r\n`;\r\n\r\nconst RECOGNIZED_CHARACTER_TYPES = [\r\n\t'hanzi',\r\n\t'comma',\r\n\t'dot',\r\n\t'exclamation mark',\r\n\t'question mark',\r\n];\r\nconst CHAR_TYPE_LENGTH = RECOGNIZED_CHARACTER_TYPES.length;\r\nconst NOTES_ARE_DISMISSED_LOCAL_STORAGE_KEY = 'notesAreDismissed';\r\nconst Notes = () => {\r\n\tconst [notesAreDismissed, setNotesAreDismissed] = useLocalStorage(\r\n\t\tNOTES_ARE_DISMISSED_LOCAL_STORAGE_KEY,\r\n\t\tfalse\r\n\t);\r\n\treturn (\r\n\t\t!notesAreDismissed && (\r\n\t\t\t<ContainerWithCenteredItems horizontal>\r\n\t\t\t\t<PaperContainerWithSpacing width=\"100%\">\r\n\t\t\t\t\t<ContainerWithCenteredItems horizontal>\r\n\t\t\t\t\t\t<PrimaryCaption>Notes: </PrimaryCaption>\r\n\t\t\t\t\t</ContainerWithCenteredItems>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t{/* eslint-disable max-len, prettier/prettier */}\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<Caption component=\"li\">\r\n\t\t\t\t\t\t\tRecognized character types are{` `}\r\n\t\t\t\t\t\t\t{RECOGNIZED_CHARACTER_TYPES.map((type, ind) => (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<SecondaryCaption key={type}>{type}</SecondaryCaption> \r\n\t\t\t\t\t\t\t\t\t{ind < CHAR_TYPE_LENGTH - 2 && `, ` || ind < CHAR_TYPE_LENGTH - 1 && ', and ' || '.'}\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Caption>\r\n\t\t\t\t\t\t<Caption component=\"li\">\r\n\t\t\t\t\t\t\t<GreenCaption>Green color</GreenCaption> {` `}\r\n\t\t\t\t\t\t\trepresents the\r\n\t\t\t\t\t\t\t{` `} <GreenCaption>radical</GreenCaption> {` `}\r\n\t\t\t\t\t\t\tin the hanzi drawings.\r\n\t\t\t\t\t\t</Caption>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t{/* eslint-enable max-len, prettier/prettier */}\r\n\t\t\t\t\t<ContainerWithCenteredItems>\r\n\t\t\t\t\t\t<TooltipButton\r\n\t\t\t\t\t\t\ttooltip=\"Dismiss Notes\"\r\n\t\t\t\t\t\t\ttext=\"Dismiss Notes\"\r\n\t\t\t\t\t\t\tonClick={() => setNotesAreDismissed(true)}\r\n\t\t\t\t\t\t\ticon={CloseIcon}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</ContainerWithCenteredItems>\r\n\t\t\t\t</PaperContainerWithSpacing>\r\n\t\t\t</ContainerWithCenteredItems>\r\n\t\t)\r\n\t);\r\n};\r\n\r\nexport default Notes;\r\n","import React from 'react';\r\nimport { InputAdornment, TextField } from '@material-ui/core';\r\n\r\nimport { speak } from 'utils/speech';\r\nimport { SpeakIcon, SearchIcon } from 'icons';\r\nimport TooltipButton from 'components/TooltipButton';\r\nimport ResponsiveCenteredContainer from 'components/ResponsiveCenteredContainer';\r\nimport Spacer from 'components/Spacer';\r\nimport { propTypes, defaultProps } from './types';\r\nimport Notes from './Notes';\r\n\r\nconst SearchForm = ({ input, onSubmit, onChange, loading }) => (\r\n\t<ResponsiveCenteredContainer>\r\n\t\t<form onSubmit={onSubmit}>\r\n\t\t\t<TextField\r\n\t\t\t\tfullWidth\r\n\t\t\t\tautoFocus\r\n\t\t\t\tlabel=\"Search for Hanzi...\"\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\ttype=\"search\"\r\n\t\t\t\tplaceholder=\"你好\"\r\n\t\t\t\tvalue={input}\r\n\t\t\t\tname=\"chinese-character\"\r\n\t\t\t\tonChange={onChange}\r\n\t\t\t\tInputProps={{\r\n\t\t\t\t\tstartAdornment: (\r\n\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t<TooltipButton\r\n\t\t\t\t\t\t\t\ttooltip=\"Speak\"\r\n\t\t\t\t\t\t\t\tonClick={() => speak(input)}\r\n\t\t\t\t\t\t\t\tdisabled={!input}\r\n\t\t\t\t\t\t\t\ticon={SpeakIcon}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t),\r\n\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t<TooltipButton\r\n\t\t\t\t\t\t\t\ttooltip=\"Search\"\r\n\t\t\t\t\t\t\t\tdisabled={!input}\r\n\t\t\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\ticon={SearchIcon}\r\n\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t),\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t<Spacer direction=\"bottom\" spacing=\"2\" />\r\n\t\t\t<Notes />\r\n\t\t</form>\r\n\t</ResponsiveCenteredContainer>\r\n);\r\n\r\nSearchForm.propTypes = propTypes;\r\nSearchForm.defaultProps = defaultProps;\r\n\r\nexport default SearchForm;\r\n","import React from 'react';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nimport ResponsiveCenteredContainer from 'components/ResponsiveCenteredContainer';\r\nimport ContainerWithCenteredItems from 'components/ContainerWithCenteredItems';\r\nimport PaperContainerWithSpacing from 'components/PaperContainerWithSpacing';\r\nimport { propTypes, defaultProps } from './types';\r\n\r\nconst TranslationResult = ({ original, translation, pinyin }) => (\r\n\t<ResponsiveCenteredContainer>\r\n\t\t<ContainerWithCenteredItems>\r\n\t\t\t<PaperContainerWithSpacing textAlign=\"center\">\r\n\t\t\t\t<Typography> {original} </Typography>\r\n\t\t\t\t<Typography> {pinyin} </Typography>\r\n\t\t\t\t<Typography> {translation} </Typography>\r\n\t\t\t</PaperContainerWithSpacing>\r\n\t\t</ContainerWithCenteredItems>\r\n\t</ResponsiveCenteredContainer>\r\n);\r\n\r\nTranslationResult.propTypes = propTypes;\r\nTranslationResult.defaultProps = defaultProps;\r\n\r\nexport default TranslationResult;\r\n","import { string } from 'prop-types';\r\n\r\nconst propTypes = {\r\n\ttranslation: string,\r\n\tpinyin: string,\r\n};\r\nconst defaultProps = {\r\n\ttranslation: '',\r\n\tpinyin: '',\r\n};\r\n\r\nexport { propTypes, defaultProps };\r\n","import { server, parse } from './rest';\r\n\r\nconst TRANSLATE_ROUTE = 'translate';\r\n\r\nconst translate = (\r\n\ttext,\r\n\tparams = {\r\n\t\tfrom: 'zh-CN',\r\n\t\tto: 'en',\r\n\t\textended: true,\r\n\t}\r\n) => parse(server.get(TRANSLATE_ROUTE, { ...params, text }));\r\n\r\nexport default translate;\r\n","import { firstCapital } from 'utils';\r\nimport { stripNonChineseChars } from 'utils/chinese';\r\nimport translate from 'api/translateApi';\r\n\r\nconst splitAndTrim = w => w.split('|').map(s => s.trim());\r\n\r\nconst getWordListAndSentenceFromTranslation = maskedWord => {\r\n\tconst group = splitAndTrim(maskedWord.toLowerCase());\r\n\tconst sentence = firstCapital(group[0]);\r\n\tconst wordList = group.slice(1);\r\n\treturn {\r\n\t\tsentence,\r\n\t\twordList,\r\n\t};\r\n};\r\n\r\nconst generateCards = (hanziList, translationList, pinyinList) =>\r\n\tArray(hanziList.length)\r\n\t\t.fill(0)\r\n\t\t.map((_, ind) => ({\r\n\t\t\ttext: hanziList[ind],\r\n\t\t\tid: ind + hanziList[ind],\r\n\t\t\thanzi: hanziList[ind],\r\n\t\t\ttranslation: translationList[ind],\r\n\t\t\tpinyin: pinyinList[ind],\r\n\t\t}));\r\n\r\nconst fetchAndParseTranslationResult = async currentChars => {\r\n\tconst hanziGroup = stripNonChineseChars(currentChars).split('');\r\n\tconst res = await translate(currentChars);\r\n\tconst {\r\n\t\tsentence: translation,\r\n\t\twordList: translationGroup,\r\n\t} = getWordListAndSentenceFromTranslation(res.translation);\r\n\tconst {\r\n\t\tsentence: pinyin,\r\n\t\twordList: pinyinGroup,\r\n\t} = getWordListAndSentenceFromTranslation(res.transcription);\r\n\r\n\treturn {\r\n\t\ttranslation,\r\n\t\tpinyin,\r\n\t\tcards: generateCards(hanziGroup, translationGroup, pinyinGroup),\r\n\t};\r\n};\r\n\r\nconst doesNotExist = value => value === null || value === undefined;\r\n\r\nexport { fetchAndParseTranslationResult, doesNotExist };\r\n","import loadable from 'utils/loadable';\r\n\r\nexport default loadable(() => import('./index'));\r\n","import { Grid, useMediaQuery } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nconst Body = styled(Grid)`\r\n\t${({ theme }) => {\r\n\t\tconst smAndDown = useMediaQuery(t => t.breakpoints.down('sm'));\r\n\t\t// This always appears\r\n\t\tconst topNavbarDiff = '64px';\r\n\t\t// This only appears on small device\r\n\t\tconst bottomNavbarDiff = (smAndDown && ' + 56px') || '';\r\n\t\t// This only appears on bigger device\r\n\t\tconst footerDiff = (!smAndDown && ' + 30px') || '';\r\n\r\n\t\treturn `\r\n\t\t&.MuiGrid-root {\r\n\t\t\t// Navigation + Footer + BottomNavbar (if mobile)\r\n\t\t\theight: calc(100% - (${topNavbarDiff}${bottomNavbarDiff}${footerDiff}));\r\n\t\t}\r\n\t\tpadding: ${theme.spacing(3, 0, (smAndDown && 15) || 3)};\r\n\t`;\r\n\t}}\r\n\tposition: relative;\r\n\twidth: 100%;\r\n\toverflow: auto;\r\n`;\r\n\r\nexport default Body;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport useSearchQueries from 'store/firebase/hooks/useSearchQueries';\r\nimport {\r\n\tstripNonChineseChars,\r\n\tstripNonChineseAndNonSetPunctionationChars,\r\n} from 'utils/chinese';\r\nimport usePrevious from 'hooks/usePrevious';\r\nimport SearchForm from 'components/SearchForm';\r\nimport TranslationResult from 'components/TranslationResult';\r\nimport Spacer from 'components/Spacer';\r\nimport ContainerWithCenteredItems from 'components/ContainerWithCenteredItems';\r\nimport { BASE_PATH } from 'routes/constants';\r\nimport { fetchAndParseTranslationResult } from './utils';\r\nimport LazyCardGrid from './CardGrid/Lazy';\r\nimport Body from './Body';\r\n\r\nconst Learn = () => {\r\n\tconst { push } = useHistory();\r\n\tconst [pending, setPending] = useState(false);\r\n\tconst [input, setInput] = useState('');\r\n\tconst [sentences, setSentences] = useState({});\r\n\tconst [cards, setCards] = useState([]);\r\n\tconst previousInput = usePrevious(input);\r\n\tconst { add } = useSearchQueries();\r\n\r\n\tconst resetCards = () => {\r\n\t\tsetCards([]);\r\n\t\tsetSentences({});\r\n\t};\r\n\r\n\tconst onChange = e => {\r\n\t\tconst { value } = e.target;\r\n\t\tsetInput(value);\r\n\t\tif (!value && cards.length) resetCards();\r\n\t};\r\n\r\n\tconst onSubmit = async e => {\r\n\t\te.preventDefault();\r\n\r\n\t\t// Trick to get to /da page in PWA\r\n\t\tif (input === '/dev-settings') {\r\n\t\t\tpush(`${BASE_PATH}/dev-settings`);\r\n\t\t}\r\n\r\n\t\t// eslint-disable-next-line max-len\r\n\t\tconst previousChineseInputWithPunctuation = stripNonChineseAndNonSetPunctionationChars(\r\n\t\t\tpreviousInput\r\n\t\t);\r\n\t\t// eslint-disable-next-line max-len\r\n\t\tconst chineseInputWithPunctuation = stripNonChineseAndNonSetPunctionationChars(\r\n\t\t\tinput\r\n\t\t);\r\n\r\n\t\t// Don't search twice using the same query\r\n\t\t// eslint-disable-next-line max-len\r\n\t\tif (\r\n\t\t\tpreviousChineseInputWithPunctuation === chineseInputWithPunctuation\r\n\t\t) {\r\n\t\t\t// If there are unrecognized chars, reset them\r\n\t\t\tif (input !== chineseInputWithPunctuation) {\r\n\t\t\t\tsetInput(chineseInputWithPunctuation);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst chineseInput = stripNonChineseChars(chineseInputWithPunctuation);\r\n\r\n\t\tif (chineseInput) {\r\n\t\t\tsetPending(true);\r\n\t\t\ttry {\r\n\t\t\t\tadd(chineseInput);\r\n\t\t\t\tsetInput(chineseInputWithPunctuation);\r\n\t\t\t\tconst {\r\n\t\t\t\t\ttranslation,\r\n\t\t\t\t\tpinyin,\r\n\t\t\t\t\tcards: resultCards,\r\n\t\t\t\t} = await fetchAndParseTranslationResult(\r\n\t\t\t\t\tchineseInputWithPunctuation\r\n\t\t\t\t);\r\n\r\n\t\t\t\tsetSentences({\r\n\t\t\t\t\toriginal: chineseInputWithPunctuation,\r\n\t\t\t\t\ttranslation,\r\n\t\t\t\t\tpinyin,\r\n\t\t\t\t});\r\n\t\t\t\tsetCards(resultCards);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error(err.message);\r\n\t\t\t} finally {\r\n\t\t\t\tsetPending(false);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (cards.length) resetCards();\r\n\t\tsetInput('');\r\n\t};\r\n\r\n\tuseEffect(() => {}, [input]);\r\n\r\n\treturn (\r\n\t\t<Body>\r\n\t\t\t<ContainerWithCenteredItems>\r\n\t\t\t\t<SearchForm\r\n\t\t\t\t\tinput={input}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\tonSubmit={onSubmit}\r\n\t\t\t\t\tloading={pending}\r\n\t\t\t\t/>\r\n\t\t\t\t{sentences.translation && <TranslationResult {...sentences} />}\r\n\t\t\t\t<Spacer direction=\"bottom\" spacing={2.5} />\r\n\t\t\t\t<LazyCardGrid cards={cards} />\r\n\t\t\t</ContainerWithCenteredItems>\r\n\t\t</Body>\r\n\t);\r\n};\r\n\r\nexport default Learn;\r\n","import React from 'react';\r\nimport { SuspenseWithPerf } from 'reactfire';\r\n\r\nimport PracticeContainer from 'containers/Learn';\r\nimport LoadingIndicator from 'components/LoadingIndicator';\r\n\r\nconst Learn = () => (\r\n\t<SuspenseWithPerf fallback={<LoadingIndicator />} traceId=\"load-learn\">\r\n\t\t<PracticeContainer />\r\n\t</SuspenseWithPerf>\r\n);\r\n\r\nexport default Learn;\r\n","import { bool, node } from 'prop-types';\r\n\r\nconst propTypes = {\r\n\tchildren: node.isRequired,\r\n\thorizontal: bool,\r\n\tvertical: bool,\r\n};\r\n\r\nconst defaultProps = {\r\n\thorizontal: true,\r\n\tvertical: false,\r\n};\r\n\r\nexport { propTypes, defaultProps };\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { Grid } from '@material-ui/core';\r\n\r\nimport { propTypes, defaultProps } from './types';\r\n\r\nconst StyledGrid = styled(Grid)`\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\t${({ $horizontal, $vertical }) => `\r\n\t\t${$horizontal && 'justify-content: center;'}\r\n\t\t${$vertical && 'height: 100%; align-items: center;'}\r\n\t`}\r\n`;\r\n\r\n/**\r\n * Centered Grid\r\n *\r\n * @component\r\n * @param {import('@material-ui/core').GridProps|import('react').HtmlHTMLAttributes}\r\n */\r\nconst ContainerWithCenteredItems = ({\r\n\tchildren,\r\n\thorizontal,\r\n\tvertical,\r\n\t...rest\r\n}) => (\r\n\t<StyledGrid $horizontal={horizontal} $vertical={vertical} {...rest}>\r\n\t\t{children}\r\n\t</StyledGrid>\r\n);\r\n\r\nContainerWithCenteredItems.propTypes = propTypes;\r\nContainerWithCenteredItems.defaultProps = defaultProps;\r\n\r\nexport default ContainerWithCenteredItems;\r\n","import styled from 'styled-components';\r\n\r\nconst StyledWrapper = styled.span`\r\n\tdisplay: block;\r\n\twidth: 100%;\r\n\t${({ theme, $direction, $spacing }) => `\r\n\t\tmargin-${$direction}: ${theme.spacing($spacing)}px;\r\n\t`}\r\n`;\r\n\r\nexport default StyledWrapper;\r\n","import React from 'react';\r\nimport StyledWrapper from './StyledWrapper';\r\nimport { defaultProps, propTypes } from './types';\r\n\r\n/**\r\n * Element that adds margin to the given direction based on the\r\n * spacing amount. The amount is passed in to the spacing method\r\n * of Mui. By default 1-unit-spacing = 8px\r\n *\r\n * @example\r\n * ```js\r\n * <Spacer direction=\"right\" spacing=\"5\" />\r\n * ```\r\n *\r\n * @component\r\n */\r\nconst Spacer = ({ direction, spacing }) => (\r\n\t<StyledWrapper\r\n\t\t$direction={direction}\r\n\t\t$spacing={\r\n\t\t\t(typeof spacing === 'string' && parseInt(spacing, 10)) || spacing\r\n\t\t}\r\n\t/>\r\n);\r\n\r\nSpacer.propTypes = propTypes;\r\nSpacer.defaultProps = defaultProps;\r\n\r\nexport default Spacer;\r\n","import { direction, numberOrString } from 'components/types';\r\n\r\nconst propTypes = {\r\n\t/**\r\n\t * - Which direction do you want to apply margin to\r\n\t */\r\n\tdirection: direction.isRequired,\r\n\t/**\r\n\t * - The amount is passed in to the spacing method of Mui.\r\n\t * - By default 1-unit-spacing = 8px\r\n\t */\r\n\tspacing: numberOrString,\r\n};\r\nconst defaultProps = {\r\n\tspacing: 1,\r\n};\r\n\r\nexport { propTypes, defaultProps };\r\n","const firstCapital = s => (s && s[0].toUpperCase() + s.slice(1)) || '';\r\n\r\n// https://stackoverflow.com/a/26188910/13161405\r\nconst pascalToSentence = str =>\r\n\tstr\r\n\t\t// Look for long acronyms and filter out the last letter\r\n\t\t.replace(/([A-Z]+)([A-Z][a-z])/g, ' $1 $2')\r\n\t\t// Look for lower-case letters followed by upper-case letters\r\n\t\t.replace(/([a-z\\d])([A-Z])/g, '$1 $2')\r\n\t\t// Look for lower-case letters followed by numbers\r\n\t\t.replace(/([a-zA-Z])(\\d)/g, '$1 $2')\r\n\t\t.replace(/^./, s => s.toUpperCase())\r\n\t\t// Remove any white space left around the word\r\n\t\t.trim();\r\n\r\nconst noop = () => null;\r\n\r\nexport { firstCapital, pascalToSentence, noop };\r\n","import { useFirestore, useFirestoreCollectionData } from 'reactfire';\r\n\r\nimport useIsAnalyticsEnabled from 'hooks/useIsAnalyticsEnabled';\r\n\r\nconst useSearchQueries = () => {\r\n\tconst [analyticsIsEnabled] = useIsAnalyticsEnabled();\r\n\tconst ref = useFirestore().collection('searchQueries');\r\n\tconst collection = useFirestoreCollectionData(ref.orderBy('createdOn'));\r\n\r\n\tconst add = query => {\r\n\t\tif (!analyticsIsEnabled) return;\r\n\r\n\t\tref.add({\r\n\t\t\tquery,\r\n\t\t\tcreatedOn: new Date(),\r\n\t\t});\r\n\t};\r\n\r\n\treturn { collection, add };\r\n};\r\n\r\nexport default useSearchQueries;\r\n","const REGEX_CHINESE = /\\p{Script=Han}/u;\r\nconst REGEX_PINYIN = /<td class=\"hanzi5-article-hanzi-info-td2\">(.*)<\\/td>/;\r\nconst REGEX_STRIP_NON_CHINESE_CHARS = /[^\\p{Script=Han}]+/gu;\r\nconst REGEX_STRIP_NON_CHINESE_AND_NON_SET_PUNCTUATION_CHARS = /[^\\p{Script=Han},.?!，、。？！]+/gu;\r\n\r\n/** @see https://github.com/sxei/pinyinjs/blob/3f0013841ba62a6d1af38e50839ea196b27369cb/pinyinUtil.js#L16 */\r\nconst TONE_MAP = {\r\n\tā: 'a',\r\n\tá: 'a',\r\n\tǎ: 'a',\r\n\tà: 'a',\r\n\tō: 'o',\r\n\tó: 'o',\r\n\tǒ: 'o',\r\n\tò: 'o',\r\n\tē: 'e',\r\n\té: 'e',\r\n\tě: 'e',\r\n\tè: 'e',\r\n\tī: 'i',\r\n\tí: 'i',\r\n\tǐ: 'i',\r\n\tì: 'i',\r\n\tū: 'u',\r\n\tú: 'u',\r\n\tǔ: 'u',\r\n\tù: 'u',\r\n\tü: 'v',\r\n\tǖ: 'v',\r\n\tǘ: 'v',\r\n\tǚ: 'v',\r\n\tǜ: 'v',\r\n\tń: 'n',\r\n\tň: 'n',\r\n\t'': 'm',\r\n};\r\n\r\nconst isChinese = text => REGEX_CHINESE.test(text);\r\nconst stripNonChineseChars = text =>\r\n\ttext.replace(REGEX_STRIP_NON_CHINESE_CHARS, '');\r\nconst stripNonChineseAndNonSetPunctionationChars = text =>\r\n\ttext.replace(REGEX_STRIP_NON_CHINESE_AND_NON_SET_PUNCTUATION_CHARS, '');\r\nconst removeTones = pinyin =>\r\n\tpinyin.replace(/[āáǎàōóǒòēéěèīíǐìūúǔùüǖǘǚǜńň]/g, match => TONE_MAP[match]);\r\n\r\nexport {\r\n\tREGEX_CHINESE,\r\n\tREGEX_PINYIN,\r\n\tREGEX_STRIP_NON_CHINESE_CHARS,\r\n\tREGEX_STRIP_NON_CHINESE_AND_NON_SET_PUNCTUATION_CHARS,\r\n\tisChinese,\r\n\tstripNonChineseChars,\r\n\tstripNonChineseAndNonSetPunctionationChars,\r\n\tremoveTones,\r\n};\r\n","import axios from 'axios';\r\n\r\nconst post = (url, body = {}, instance = axios) => instance.post(url, body);\r\n\r\nconst get = (url, params = {}, instance = axios) => {\r\n\treturn instance.get(url, {\r\n\t\tparams,\r\n\t});\r\n};\r\n\r\nconst put = (url, body, instance = axios) => instance.put(url, body);\r\n\r\nconst remove = (url, instance = axios) => instance.delete(url);\r\n\r\n// https://github.com/axios/axios#response-schema\r\nconst parse = async res => {\r\n\tconst { data } = await res;\r\n\treturn data;\r\n};\r\n\r\n// Set config defaults when creating the instance\r\nconst serverInstance = axios.create({\r\n\tbaseURL: process.env.REACT_APP_SERVER_URI,\r\n});\r\n\r\nconst server = {\r\n\tpost: (...props) => post(...props, serverInstance),\r\n\tget: (...props) => get(...props, serverInstance),\r\n\tput: (...props) => put(...props, serverInstance),\r\n\tdelete: (...props) => remove(...props, serverInstance),\r\n};\r\n\r\nexport { post, get, put, remove as delete, parse, server };\r\n","// #region CONSTANTS\r\n\r\nimport { get } from 'api/rest';\r\n\r\n/** @see https://github.com/sxei/pinyinjs/blob/3f0013841ba62a6d1af38e50839ea196b27369cb/pinyinUtil.js#L16 */\r\nconst TONE_MAP = {\r\n\tā: 'a1',\r\n\tá: 'a2',\r\n\tǎ: 'a3',\r\n\tà: 'a4',\r\n\tō: 'o1',\r\n\tó: 'o2',\r\n\tǒ: 'o3',\r\n\tò: 'o4',\r\n\tē: 'e1',\r\n\té: 'e2',\r\n\tě: 'e3',\r\n\tè: 'e4',\r\n\tī: 'i1',\r\n\tí: 'i2',\r\n\tǐ: 'i3',\r\n\tì: 'i4',\r\n\tū: 'u1',\r\n\tú: 'u2',\r\n\tǔ: 'u3',\r\n\tù: 'u4',\r\n\tü: 'v0',\r\n\tǖ: 'v1',\r\n\tǘ: 'v2',\r\n\tǚ: 'v3',\r\n\tǜ: 'v4',\r\n\tń: 'n2',\r\n\tň: 'n3',\r\n\t'': 'm2',\r\n};\r\n\r\nconst HAN_TRAINER_PRO_PREFIX = `https://www.hantrainerpro.de/resources/pronunciations/`;\r\nconst HAN_TRAINER_PRO_POSTFIX = '.mp3';\r\n\r\n// Don't recreate these on each speak\r\nlet synth;\r\nlet utterance;\r\nif (window.speechSynthesis || window.SpeechSynthesisUtterance) {\r\n\tsynth = window.speechSynthesis;\r\n\tutterance = new SpeechSynthesisUtterance();\r\n\tutterance.pitch = 1;\r\n\tutterance.rate = 0.8;\r\n}\r\n\r\nconst PINYIN_JS_URL = `https://cdn.jsdelivr.net/gh/sxei/pinyinjs/pinyinUtil.js`;\r\nconst PINYIN_JS_DICTIONARY_URL = `https://cdn.jsdelivr.net/gh/sxei/pinyinjs/dict/pinyin_dict_withtone.js`;\r\n\r\n// #endregion\r\n\r\n/**\r\n * HanTrainerPro uses direct mark to tone conversion, so we need to\r\n * parse single tone marks to their respective numbered tones.\r\n * - As an example, for hǎo:\r\n * \t- We would normally want hao3\r\n * \t\t- @see https://hantrainerpro.de/resources/pronunciations/hao3.mp3 (Error)\r\n * \t- But the api works with ha3o\r\n * \t\t- @see https://hantrainerpro.de/resources/pronunciations/ha3o.mp3 (Working)\r\n *\r\n * @see https://github.com/sxei/pinyinjs/blob/3f0013841ba62a6d1af38e50839ea196b27369cb/pinyinUtil.js#L260 (Algorithm)\r\n *\r\n * @example\r\n * markToNumberForHanTrainerPro(hǎo);\r\n * // returns ha3o\r\n *\r\n * @param {String} pinyin Pinyin to parse\r\n */\r\nconst markToNumberForHanTrainerPro = pinyin =>\r\n\tpinyin.replace(/[āáǎàōóǒòēéěèīíǐìūúǔùüǖǘǚǜńň]/g, match => TONE_MAP[match]);\r\n\r\n/**\r\n * Speaks the given word using SpeechSynthesisUtterance\r\n *\r\n * @param {String} text Hanzi to speak.\r\n */\r\nconst speak = text => {\r\n\tif (!text) return;\r\n\tif (!synth || !utterance) {\r\n\t\t// eslint-disable-next-line no-alert\r\n\t\talert(\r\n\t\t\t`You browser doesn't support native speec, please upgrade or try somewhere else for now.`\r\n\t\t);\r\n\t\treturn;\r\n\t}\r\n\tif (synth.speaking) synth.cancel();\r\n\r\n\t// For some reason this fails in the first time\r\n\tif (!utterance.voice) {\r\n\t\tutterance.voice = synth.getVoices().find(v => v.lang === 'zh-CN');\r\n\t}\r\n\tutterance.text = text;\r\n\tsynth.speak(utterance);\r\n};\r\n\r\n/**\r\n * Imports pinyinJS dictionary and utility once\r\n *\r\n * @see https://github.com/sxei/pinyinjs\r\n */\r\nconst importPinyinJsIfNeeded = async () => {\r\n\tif (!window.pinyin_dict_withtone) {\r\n\t\tconst { data } = await get(PINYIN_JS_DICTIONARY_URL, {\r\n\t\t\theaders: {\r\n\t\t\t\taccept: 'text/js',\r\n\t\t\t},\r\n\t\t});\r\n\t\twindow.pinyin_dict_withtone = data.replace(\r\n\t\t\t/var pinyin_dict_withtone = |\"|;/g,\r\n\t\t\t''\r\n\t\t);\r\n\t}\r\n\tif (!window.pinyinUtil) {\r\n\t\t// await import('./pinyinUtil');\r\n\t\tconst { data } = await get(PINYIN_JS_URL, {\r\n\t\t\theaders: {\r\n\t\t\t\taccept: 'text/js',\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\t// eslint-disable-next-line no-eval\r\n\t\teval(data);\r\n\t}\r\n};\r\n\r\n/**\r\n * Tries a native speech via Han Trainer Pro w/ a fallback to\r\n * SpeechSynthesisUtterance\r\n *\r\n * @param {String} hanzi Hanzi character to speak.\r\n * @param {String} pinyin Pinyin for the given hanzi.\r\n */\r\nconst trySpeakNative = async (hanzi, pinyin = '') => {\r\n\tif (!hanzi) return;\r\n\r\n\t// If no pinyin was passed in, then we use pinyinjs rather than making\r\n\t// a google-translate api call, this can be cached later so it's ok\r\n\t// to make a rather bigger request\r\n\tlet _pinyin = pinyin;\r\n\tif (!_pinyin) {\r\n\t\tawait importPinyinJsIfNeeded();\r\n\t\t_pinyin = window.pinyinUtil.getPinyin(hanzi);\r\n\t}\r\n\tconst numberedPinyin = markToNumberForHanTrainerPro(_pinyin);\r\n\tconst audioUrl =\r\n\t\tHAN_TRAINER_PRO_PREFIX + numberedPinyin + HAN_TRAINER_PRO_POSTFIX;\r\n\ttry {\r\n\t\tconst audio = new Audio(audioUrl);\r\n\t\tawait audio.play();\r\n\t} catch (e) {\r\n\t\tconsole.warn(\r\n\t\t\t`Failed to fetch native speech, will play default speech. Failed on the following:`,\r\n\t\t\t{\r\n\t\t\t\tpinyin: _pinyin,\r\n\t\t\t\thanzi,\r\n\t\t\t\tnumberedPinyin,\r\n\t\t\t\taudioUrl,\r\n\t\t\t}\r\n\t\t);\r\n\t\tspeak(hanzi);\r\n\t}\r\n};\r\n\r\nexport { speak, trySpeakNative };\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport { fade } from '../styles/colorManipulator';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      height: 1,\n      margin: 0,\n      // Reset browser default style.\n      border: 'none',\n      flexShrink: 0,\n      backgroundColor: theme.palette.divider\n    },\n\n    /* Styles applied to the root element if `absolute={true}`. */\n    absolute: {\n      position: 'absolute',\n      bottom: 0,\n      left: 0,\n      width: '100%'\n    },\n\n    /* Styles applied to the root element if `variant=\"inset\"`. */\n    inset: {\n      marginLeft: 72\n    },\n\n    /* Styles applied to the root element if `light={true}`. */\n    light: {\n      backgroundColor: fade(theme.palette.divider, 0.08)\n    },\n\n    /* Styles applied to the root element if `variant=\"middle\"`. */\n    middle: {\n      marginLeft: theme.spacing(2),\n      marginRight: theme.spacing(2)\n    },\n\n    /* Styles applied to the root element if `orientation=\"vertical\"`. */\n    vertical: {\n      height: '100%',\n      width: 1\n    },\n\n    /* Styles applied to the root element if `flexItem={true}`. */\n    flexItem: {\n      alignSelf: 'stretch',\n      height: 'auto'\n    }\n  };\n};\nvar Divider = /*#__PURE__*/React.forwardRef(function Divider(props, ref) {\n  var _props$absolute = props.absolute,\n      absolute = _props$absolute === void 0 ? false : _props$absolute,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'hr' : _props$component,\n      _props$flexItem = props.flexItem,\n      flexItem = _props$flexItem === void 0 ? false : _props$flexItem,\n      _props$light = props.light,\n      light = _props$light === void 0 ? false : _props$light,\n      _props$orientation = props.orientation,\n      orientation = _props$orientation === void 0 ? 'horizontal' : _props$orientation,\n      _props$role = props.role,\n      role = _props$role === void 0 ? Component !== 'hr' ? 'separator' : undefined : _props$role,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'fullWidth' : _props$variant,\n      other = _objectWithoutProperties(props, [\"absolute\", \"classes\", \"className\", \"component\", \"flexItem\", \"light\", \"orientation\", \"role\", \"variant\"]);\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className, variant !== 'fullWidth' && classes[variant], absolute && classes.absolute, flexItem && classes.flexItem, light && classes.light, orientation === 'vertical' && classes.vertical),\n    role: role,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Divider.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * Absolutely position the element.\n   */\n  absolute: PropTypes.bool,\n\n  /**\n   * @ignore\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .elementType,\n\n  /**\n   * If `true`, a vertical divider will have the correct height when used in flex container.\n   * (By default, a vertical divider will have a calculated height of `0px` if it is the child of a flex container.)\n   */\n  flexItem: PropTypes.bool,\n\n  /**\n   * If `true`, the divider will have a lighter color.\n   */\n  light: PropTypes.bool,\n\n  /**\n   * The divider orientation.\n   */\n  orientation: PropTypes.oneOf(['horizontal', 'vertical']),\n\n  /**\n   * @ignore\n   */\n  role: PropTypes.string,\n\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes.oneOf(['fullWidth', 'inset', 'middle'])\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiDivider'\n})(Divider);","import { useEffect, useRef } from 'react';\r\n\r\n// https://usehooks.com/usePrevious/\r\nconst usePrevious = value => {\r\n\t// The ref object is a generic container whose current property is mutable ...\r\n\t// ... and can hold any value, similar to an instance property on a class\r\n\tconst ref = useRef();\r\n\r\n\t// Store current value in ref\r\n\tuseEffect(() => {\r\n\t\tref.current = value;\r\n\t}, [value]); // Only re-run if value changes\r\n\r\n\t// Return previous value (happens before update in useEffect above)\r\n\treturn ref.current;\r\n};\r\n\r\nexport default usePrevious;\r\n"],"sourceRoot":""}